var At=Object.defineProperty,Ct=Object.defineProperties;var bt=Object.getOwnPropertyDescriptors;var Xe=Object.getOwnPropertySymbols;var $t=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable;var Ye=(e,n,s)=>n in e?At(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,de=(e,n)=>{for(var s in n||(n={}))$t.call(n,s)&&Ye(e,s,n[s]);if(Xe)for(var s of Xe(n))kt.call(n,s)&&Ye(e,s,n[s]);return e},xe=(e,n)=>Ct(e,bt(n));import{E as Lt,a as Me,b as yt,c as wt,d as Ut,e as Bt,f as Tt,g as Ot,h as xt,i as Mt,j as Pt,k as Rt,l as Vt,m as Nt,n as Gt,o as zt,p as Ht,q as jt,r as Xt,s as Yt,t as Jt,u as qt,v as Kt,w as Wt,C as Qt,x as Zt,y as en,z as tn,A as nn,B as sn,D as on,F as V,G as C,H as x,I as me,J as B,K,L as F,M as Se,N as d,O as E,P as f,Q as g,R as l,S as fe,T as se,U as b,V as h,W as oe,X as ie,Y as y,Z as O,_ as an,$ as le,a0 as r,a1 as Q,a2 as Z,a3 as un,a4 as W,a5 as Je,a6 as ge,a7 as qe,a8 as Ae,a9 as Ce,aa as Ke,ab as ln,ac as rn,ad as cn,ae as dn}from"./vendor.710ae729.js";const _n=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const a of u.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerpolicy&&(u.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?u.credentials="include":o.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function t(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}};_n();const pn="modulepreload",We={},mn="./",Qe=function(n,s){return!s||s.length===0?n():Promise.all(s.map(t=>{if(t=`${mn}${t}`,t in We)return;We[t]=!0;const o=t.endsWith(".css"),u=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${u}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":pn,o||(a.as="script",a.crossOrigin=""),a.href=t,document.head.appendChild(a),o)return new Promise((i,_)=>{a.addEventListener("load",i),a.addEventListener("error",_)})})).then(()=>n())};function fn(e){[Lt,Me,yt,wt,Ut,Bt,Tt,Ot,xt,Mt,Pt,Rt,Vt,Nt,Gt,zt,Ht,jt,Xt,Yt,Jt,qt,Kt,Wt].forEach(n=>{e.use(n)})}const be="PICX_",Pe=`${be}CONFIG`,Ze=`${be}UPLOADED`,et=`${be}MANAGEMENT_MULTI`,tt=`${be}SETTINGS`,he=(e,n)=>({type:"dir",dir:e,dirPath:n,childrenDirs:[],imageList:[]}),gn=e=>{if(e==="/")return{currentDir:"/",dirPath:"/"};const n=e.split("/");return n.length===1?{currentDir:"/",dirPath:"/"}:n.length>1?(n.length-=1,{currentDir:n[n.length-1],dirPath:n.join("/")}):{currentDir:"/",dirPath:"/"}},hn=e=>{if(e==="/")return[];const n=e.split("/"),s=[];let t="";return n.forEach((o,u)=>{t+=`${u>0?"/":""}${o}`,s.unshift(t)}),s};function nt(e,n,s){var t;return e?n.length===s?e:nt((t=e.childrenDirs)==null?void 0:t.find(o=>o.dir===n[s]),n,++s):null}const $e=(e,n)=>{if(e==="/")return n;const s=e.split("/");return nt(n,s,0)},ke=(e,n,s)=>{var t;return s==="dir"?(t=n.childrenDirs)==null?void 0:t.filter(o=>o.type==="dir"):s==="image"?n.imageList.filter(o=>o.type==="image"):[]},En=(e,n)=>{e==="/"&&n.dispatch("SET_USER_CONFIG_INFO",{dirMode:"rootDir"})},vn=()=>{const e=localStorage.getItem(et);return e?JSON.parse(e):he("/","/")},Fn={state:{name:"dirImageListModule",dirObject:vn()},mutations:{},actions:{DIR_IMAGE_LIST_ADD_DIR({state:e,dispatch:n},s){if(s==="/")return;const t=(i,_,p)=>i?(i.childrenDirs.some(c=>c.dir===_)||i.childrenDirs.push(he(_,p)),i.childrenDirs.find(c=>c.dir===_)||he(_,p)):he(_,p),o=s.split("/");let u="",a=e.dirObject;for(let i=0,_=o.length;i<_;i++){const p=o[i];u+=`${i>0?"/":""}${p}`,a=t(a,p,u),i===0&&n("USER_CONFIG_INFO_ADD_DIR",p)}n("DIR_IMAGE_LIST_PERSIST")},DIR_IMAGE_LIST_REMOVE_DIR({state:e,dispatch:n},s){if(s==="/")return;const t=(a,i,_)=>{if(i==="/")return e.dirObject;const p=a.childrenDirs.find(m=>m.dir===i);if(!p)return a;if(_){const m=a.childrenDirs.findIndex(c=>c.dir===i);m!==-1&&a.childrenDirs.splice(m,1)}return p},o=s.split("/");let u=e.dirObject;o.forEach((a,i)=>{u=t(u,a,i===o.length-1),i===0&&n("USER_CONFIG_INFO_REMOVE_DIR",a)}),n("DIR_IMAGE_LIST_PERSIST")},DIR_IMAGE_LIST_ADD_IMAGE({state:e,dispatch:n},s){const t=(u,a,i,_=!1)=>{var m;if(!u)return e.dirObject;const p=(m=u.childrenDirs)==null?void 0:m.find(c=>c.dir===a);return p?(_&&!p.imageList.some(c=>c.name===i.name)&&p.imageList.push(i),p):e.dirObject};let o=e.dirObject;if(s.dir==="/")o.imageList.some(u=>u.name===s.name)||o.imageList.push(s);else{const u=s.dir.split("/");u.forEach((a,i)=>{o=t(o,a,s,i===u.length-1)})}n("DIR_IMAGE_LIST_PERSIST")},DIR_IMAGE_LIST_REMOVE({state:e,dispatch:n},s){const t=(p,m)=>{if(p.length){const c=p.findIndex(S=>S.uuid===m);c!==-1&&p.splice(c,1)}},o=(p,m,c,S)=>{if(!p)return e.dirObject;const v=p.childrenDirs.find(T=>T.dir===m);return v?(v.dir===m&&S&&t(v.imageList,c.uuid),v):e.dirObject},{dir:u,uuid:a}=s;if(u==="/"){t(e.dirObject.imageList,a),n("DIR_IMAGE_LIST_PERSIST");return}const i=u.split("/");let _=e.dirObject;i.forEach((p,m)=>{_=o(_,p,s,m===i.length-1),!_.imageList.length&&!_.childrenDirs.length&&hn(_.dirPath).forEach(S=>{const v=$e(S,e.dirObject);if(v&&!v.imageList.length&&!v.childrenDirs.length){const{dirPath:T}=gn(S);n("SET_USER_CONFIG_INFO",{selectedDir:T}),n("DIR_IMAGE_LIST_REMOVE_DIR",S)}})})},DIR_IMAGE_LIST_INIT_DIR({state:e,dispatch:n},s){let t=e.dirObject;if(s==="/"){t.imageList=[],t.childrenDirs=[],n("DIR_IMAGE_LIST_PERSIST");return}const o=(a,i,_)=>{var m;if(!a)return e.dirObject;const p=(m=a.childrenDirs)==null?void 0:m.find(c=>c.dir===i);return p?(_&&(p.imageList=[],p.childrenDirs=[]),p):e.dirObject},u=s.split("/");u.forEach((a,i)=>{t=o(t,a,i===u.length-1)}),n("DIR_IMAGE_LIST_PERSIST")},DIR_IMAGE_LIST_PERSIST({state:e}){localStorage.setItem(et,JSON.stringify(e.dirObject))},DIR_IMAGE_LOGOUT({state:e}){e.dirObject=he("/","/")}},getters:{getDirObject:e=>e.dirObject}},Dn={state:{curImgBase64Url:"",curImgUuid:"",list:[],uploadedNumber:0},actions:{TO_UPLOAD_IMAGE_LIST_ADD({state:e},n){e.list.unshift(n)},TO_UPLOAD_IMAGE_SET_CURRENT({state:e},{uuid:n,base64Url:s}){e.curImgUuid=n,e.curImgBase64Url=s},TO_UPLOAD_IMAGE_UPLOADED({state:e}){e.uploadedNumber+=1},TO_UPLOAD_IMAGE_LIST_REMOVE({state:e},n){if(e.list.length>0){const s=e.list.findIndex(t=>t.uuid===n);if(s!==-1&&e.list.splice(s,1),e.list.length===0)e.curImgBase64Url="",e.uploadedNumber=0;else if(e.curImgUuid===n){const t=e.list[0];e.curImgBase64Url=t.imgData.base64Url,e.curImgUuid=t.uuid}}},TO_UPLOAD_IMAGE_LIST_FAIL({state:e}){if(e.list.length>0){const n=e.list.filter(s=>s.uploadStatus.progress!==100);n.length>0&&(e.list=n,e.uploadedNumber=0,e.curImgBase64Url=n[0].imgData.base64Url)}},TO_UPLOAD_IMAGE_CLEAN_URL({state:e}){e.curImgBase64Url=""},TO_UPLOAD_IMAGE_CLEAN_LIST({state:e}){e.list=[]},TO_UPLOAD_IMAGE_CLEAN_UPLOADED_NUMBER({state:e}){e.uploadedNumber=0},TO_UPLOAD_IMAGE_LOGOUT({state:e}){e.curImgBase64Url="",e.list=[],e.uploadedNumber=0}},getters:{getToUploadImageList:e=>e.list,getToUploadImage:e=>e}},In=()=>{const e=sessionStorage.getItem(Ze);return e?JSON.parse(e):[]},Sn={state:{uploadedImageList:In()},mutations:{},actions:{UPLOADED_LIST_ADD({state:e,dispatch:n},s){e.uploadedImageList.unshift(s),n("UPLOADED_LIST_PERSIST")},UPLOADED_LIST_REMOVE({state:e,dispatch:n},s){if(e.uploadedImageList.length>0){const t=e.uploadedImageList.findIndex(o=>o.uuid===s);t!==-1&&(e.uploadedImageList.splice(t,1),n("UPLOADED_LIST_PERSIST"))}},UPLOADED_LIST_PERSIST({state:e}){sessionStorage.setItem(Ze,JSON.stringify(e.uploadedImageList))},UPLOADED_LIST_LOGOUT({state:e}){e.uploadedImageList=[]}},getters:{getUploadedImageList:e=>e.uploadedImageList}};var re;(function(e){e.newBranch="newBranch",e.reposBranch="reposBranch"})(re||(re={}));const st=e=>{const n=Object.prototype.toString.call(e).split(" ")[1];return n.substring(0,n.length-1).toLowerCase()},Re=e=>{for(const n in e)switch(st(e[n])){case"object":Re(e[n]);break;case"string":e[n]="";break;case"array":e[n]=[];break;case"number":e[n]=0;break;case"boolean":e[n]=!1;break}},Ve=(e,n)=>{for(const s in n)st(n[s])!=="object"?e&&(e[s]=n[s]):Ve(e[s],n[s])};var J;(function(e){e.autoDir="autoDir",e.newDir="newDir",e.rootDir="rootDir",e.reposDir="reposDir"})(J||(J={}));class Le{static zerofill(n){return n<10?`0${n}`:n}static getYyyyMmDd(n=Date.now()){const s=new Date(n),t=s.getFullYear(),o=s.getMonth()+1,u=s.getDate();return`${t}${this.zerofill(o)}${this.zerofill(u)}`}static formatTimestamp(n=Date.now()){const s=new Date(n),t=s.getFullYear(),o=s.getMonth()+1,u=s.getDate(),a=s.getHours(),i=s.getMinutes(),_=s.getSeconds();return`${t}-${this.zerofill(o)}-${this.zerofill(u)} ${this.zerofill(a)}:${this.zerofill(i)}:${this.zerofill(_)}`}}const An=()=>{const e={token:"",owner:"",email:"",name:"",avatarUrl:"",selectedRepos:"",reposList:[],branchMode:re.reposBranch,branchList:[],selectedBranch:"",selectedDir:"",dirMode:J.reposDir,dirList:[],loggingStatus:!1,selectedDirList:[]},n=localStorage.getItem(Pe);return n&&(Ve(e,JSON.parse(n)),e.selectedBranch&&!e.branchList.length&&(e.branchList=[{value:e.selectedBranch,label:e.selectedBranch}]),e.dirMode===J.autoDir&&(e.selectedDir=Le.getYyyyMmDd())),e},Cn={state:{userConfigInfo:An()},actions:{SET_USER_CONFIG_INFO({state:e,dispatch:n},s){for(const t in s)e.userConfigInfo.hasOwnProperty(t)&&(e.userConfigInfo[t]=s[t]);n("USER_CONFIG_INFO_PERSIST")},USER_CONFIG_INFO_ADD_DIR({state:e,dispatch:n},s){e.userConfigInfo.dirList.some(t=>t.value===s)||(e.userConfigInfo.dirList.push({label:s,value:s}),n("USER_CONFIG_INFO_PERSIST"))},USER_CONFIG_INFO_REMOVE_DIR({state:e,dispatch:n},s){const{dirList:t}=e.userConfigInfo;if(t.some(o=>o.value===s)){const o=t.findIndex(u=>u.value===s);t.splice(o,1),n("USER_CONFIG_INFO_PERSIST")}},USER_CONFIG_INFO_PERSIST({state:e}){const{selectedDir:n,selectedBranch:s,dirMode:t}=e.userConfigInfo;if(t==="newDir"){const o=n.split("");let u=0,a="";for(let i=0;i<o.length&&((o[i]===" "||o[i]==="."||o[i]==="\u3001")&&(o[i]="-"),o[i]==="/"&&(u+=1),!(u>=3));i++)a+=o[i];e.userConfigInfo.selectedDir=a}e.userConfigInfo.selectedBranch=s.replace(/\s+/g,"-"),localStorage.setItem(Pe,JSON.stringify(e.userConfigInfo))},USER_CONFIG_INFO_LOGOUT({state:e}){Re(e.userConfigInfo)}},getters:{getUserLoggingStatus:e=>e.userConfigInfo.loggingStatus,getUserConfigInfo:e=>e.userConfigInfo}},bn={state:{imageViewer:{imgInfo:null,isShow:!1}},mutations:{IMAGE_VIEWER(e,{imgInfo:n,isShow:s}){e.imageViewer.imgInfo=n,e.imageViewer.isShow=s},IMAGE_VIEWER_LOGOUT(e){e.imageViewer.isShow=!1,e.imageViewer.imgInfo=null}},actions:{},getters:{getImageViewer:e=>e.imageViewer}},$n={state:{imgCardArr:[]},mutations:{IMAGE_CARD(e,{imageObj:n}){const{uuid:s,checked:t}=n;t&&e.imgCardArr.forEach(o=>{o.uuid===s&&(o.checked=!0)})},REPLACE_IMAGE_CARD(e,{checkedImgArr:n}){n.length>0?e.imgCardArr=n:e.imgCardArr=[]}},actions:{},getters:{getImageCardArr:e=>e.imgCardArr,getImageCardCheckedArr:e=>e.imgCardArr.filter(n=>n.checked)}},kn={state:{uploadAreaActive:!1},mutations:{CHANGE_UPLOAD_AREA_ACTIVE(e,n){e.uploadAreaActive=n},UPLOAD_AREA_ACTIVE_LOGOUT(e){e.uploadAreaActive=!1}},actions:{},getters:{getUploadAreaActive:e=>e.uploadAreaActive}},Ln={state:{uploadSettings:{isSetMaxSize:!0,imageMaxSize:30*1024}},mutations:{UPLOAD_SETTINGS_LOGOUT(e){e.uploadSettings.isSetMaxSize=!0,e.uploadSettings.imageMaxSize=50*1024}},actions:{},getters:{getUploadSettings:e=>e.uploadSettings}};var ye;(function(e){e.mozJPEG="mozJPEG",e.avif="avif",e.webP="webP"})(ye||(ye={}));const yn=async(e,n)=>new Qt(e,{encoderState:{type:n,options:Zt[n].meta.defaultOptions},processorState:en,preprocessorState:tn}).process(),wn=()=>{const e={defaultHash:!0,defaultMarkdown:!1,defaultPrefix:!1,prefixName:"",isCompress:!0,compressEncoder:ye.webP,themeMode:"light",autoLightThemeTime:["08:00","19:00"],elementPlusSize:"medium"},n=localStorage.getItem(tt);return n&&Ve(e,JSON.parse(n)),e},Un={state:{userSettings:wn()},actions:{SET_USER_SETTINGS({state:e},n){for(const s in n)e.userSettings.hasOwnProperty(s)&&(e.userSettings[s]=n[s])},USER_SETTINGS_PERSIST({state:e}){localStorage.setItem(tt,JSON.stringify(e.userSettings))},USER_SETTINGS_LOGOUT({state:e}){Re(e.userSettings)}},getters:{getUserSettings:e=>e.userSettings}},P=nn({modules:{dirImageListModule:Fn,toUploadImageModule:Dn,uploadedImageListModule:Sn,userConfigInfoModule:Cn,imageViewerModule:bn,imageCardModule:$n,uploadAreaActiveModule:kn,uploadSettingsModule:Ln,userSettingsModule:Un},state:{rootName:"root"},mutations:{},actions:{LOGOUT({dispatch:e,commit:n}){e("DIR_IMAGE_LOGOUT"),e("TO_UPLOAD_IMAGE_LOGOUT"),e("UPLOADED_LIST_LOGOUT"),e("USER_CONFIG_INFO_LOGOUT"),n("IMAGE_VIEWER_LOGOUT"),n("UPLOAD_AREA_ACTIVE_LOGOUT"),n("UPLOAD_SETTINGS_LOGOUT"),e("USER_SETTINGS_LOGOUT"),localStorage.clear(),sessionStorage.clear()}},getters:{}}),ot=Symbol("vuex-store");function H(){return sn(ot)}const Bn="https://api.github.com",q=on.create({baseURL:Bn,timeout:3e5});q.defaults.headers["Content-Type"]="application/json";q.interceptors.request.use(e=>{const n=localStorage.getItem(Pe);if(n){const{token:s}=JSON.parse(n);s&&(e.headers.Authorization=`token ${s}`)}return e.method==="get"&&(e.url=`${e.url}?${Date.now()}`),e},e=>Promise.reject(e));q.interceptors.response.use(e=>e,e=>{if(e.response&&e.response.data){const n=e.response.status,s=e.response.data.message;V.error(`Code: ${n}, Message: ${s}`),console.error("[PicX Error]",e.response)}else V.error(`${e}`);return e.response});const at=()=>Number(Math.random().toString().substr(2,5)+Date.now()).toString(36),Ee=e=>{const n=e.indexOf(".");return e.substr(0,n).trim().replace(/\s+/g,"-")},Ne=e=>{const n=e.lastIndexOf(".");return e.substr(n+1,e.length)},ut=e=>/(png|jpg|gif|jpeg|webp|avif|svg\+xml|image\/x-icon)$/.test(e),we=e=>Number((e/1024).toFixed(2)),it=e=>e?{name:Ee(e),hash:at(),suffix:Ne(e)}:{name:"",hash:"",suffix:""};var M;(function(e){e.gh="gh",e.md_gh="md_gh",e.cdn="cdn",e.md_cdn="md_cdn"})(M||(M={}));const ae=(e,n,s)=>{const t=`https://cdn.jsdelivr.net/gh/${s.owner}/${s.selectedRepos}@${s.selectedBranch}/${n.path}`,o=decodeURI(n.download_url);switch(e){case M.gh:return o;case M.md_gh:return`![${Ee(n.name)}](${o})`;case M.cdn:return t;case M.md_cdn:return`![${Ee(n.name)}](${t})`}},Ue=C(()=>P.getters.getUserConfigInfo).value;function Tn(e,n){return{type:"image",uuid:at(),dir:n,name:e.name,path:e.path,sha:e.sha,github_url:ae(M.gh,e,Ue),cdn_url:ae(M.cdn,e,Ue),md_gh_url:ae(M.md_gh,e,Ue),md_cdn_url:ae(M.md_cdn,e,Ue),deleting:!1,is_transform_md:!1,size:e.size,checked:!1}}const _e=C(()=>P.getters.getUserConfigInfo).value,lt=(e="")=>new Promise(n=>{q.get(`/repos/${_e.owner}/${_e.selectedRepos}/contents/${e}`,{params:{ref:_e.selectedBranch}}).then(s=>{s&&s.status===200&&s.data.length>0?n(s.data.filter(t=>t.type==="dir").map(t=>({value:t.name,label:t.name}))):n(null)}).catch(()=>{n(null)})}),Be=(e="")=>new Promise(n=>{q.get(`/repos/${_e.owner}/${_e.selectedRepos}/contents/${e}`,{params:{ref:_e.selectedBranch}}).then(s=>{s&&s.status===200&&s.data.length>0?(s.data.filter(t=>t.type==="dir").forEach(t=>P.dispatch("DIR_IMAGE_LIST_ADD_DIR",t.path)),setTimeout(()=>{s.data.filter(t=>t.type==="file"&&ut(Ne(t.name))).forEach(t=>P.dispatch("DIR_IMAGE_LIST_ADD_IMAGE",Tn(t,e)))},100),n(!0)):n(null)}).catch(()=>{n(null)})});var R=(e,n)=>{const s=e.__vccOpts||e;for(const[t,o]of n)s[t]=o;return s};const On={class:"page-container config-page-container"},xn=y(" \u786E\u8BA4 Token ");const Mn=y("\u65B0\u5EFA\u76EE\u5F55"),Pn=y("\u6839\u76EE\u5F55"),Rn=y("\u81EA\u52A8\u76EE\u5F55"),Vn=y(" \u91CD\u7F6E "),Nn=y(" \u5B8C\u6210\u914D\u7F6E "),Gn=x({setup(e){const n=me(),s=H(),t=C(()=>s.getters.getUserConfigInfo).value,o=C(()=>s.getters.getUserConfigInfo).value,u=C(()=>s.getters.getUserSettings).value,a=B(!1),i=B(!1),_=B(!1),p=C(()=>u.elementPlusSize!=="medium"?"top":"right"),m=B("elCascaderKey");function c(){s.dispatch("USER_CONFIG_INFO_PERSIST")}function S(A){t.loggingStatus=!0,t.owner=A.data.login,t.name=A.data.name,t.email=A.data.email,t.avatarUrl=A.data.avatar_url,c()}function v(A){q.get(A,{params:{type:"public",sort:"created",per_page:100}}).then(D=>{if(console.log("[getReposList] ",D),D.status===200&&D.data.length>0){t.reposList=[];for(const w of D.data)!w.fork&&!w.private&&t.reposList.push({value:w.name,label:w.name,desc:w.description});a.value=!1,c()}})}async function T(){i.value=!0,t.dirList=await lt(),c(),i.value=!1}function N(A){switch(A){case J.rootDir:t.selectedDir="/";break;case J.autoDir:t.selectedDir=Le.getYyyyMmDd();break;case J.newDir:t.selectedDir="xxx";break;case J.reposDir:const{dirList:D}=t;D.length?t.selectedDir=D[0].value:t.selectedDir="";break;default:t.selectedDir="/";break}c()}function k(A){_.value=!0,q.get(`/repos/${t.owner}/${A}/branches`).then(D=>{if(console.log("[getBranchList] ",D),D&&D.status===200){if(_.value=!1,D.data.length>0){for(const w of D.data)t.branchList.push({value:w.name,label:w.name});t.selectedBranch=t.branchList[0].value,t.branchMode=re.reposBranch,T()}else t.selectedBranch="master",t.branchMode=re.newBranch;N(t.dirMode),c()}})}function U(){t.token?(a.value=!0,q.get("/user",{headers:{Authorization:`token ${t.token}`}}).then(A=>{console.log("[getUserInfo] ",A),A&&A.status===200?(S(A),v(A.data.repos_url)):a.value=!1})):V.warning("Token \u4E0D\u80FD\u4E3A\u7A7A\uFF01")}function I(A){t.branchList=[],t.dirList=[],k(A),c()}async function $(A){t.selectedBranch=A,await T(),m.value=t.selectedBranch,t.selectedDir=t.dirList[0].value,t.selectedDirList=[t.selectedDir],c()}function j(A){const D=t.selectedBranch,w=t.branchList[0].value;switch(A){case re.newBranch:t.selectedBranch="xxx",t.dirMode=J.newDir,t.selectedDir="xxx";break;case re.reposBranch:D!==w&&(t.selectedBranch=w,T());break;default:t.selectedBranch="";break}c()}function G(){a.value=!1,i.value=!1,s.dispatch("LOGOUT")}function X(){const{selectedDir:A,dirMode:D}=t;let w="\u76EE\u5F55\u4E0D\u80FD\u4E3A\u7A7A\uFF01";if(A===""){switch(D){case J.newDir:w="\u8BF7\u5728\u8F93\u5165\u6846\u8F93\u5165\u4E00\u4E2A\u65B0\u76EE\u5F55\uFF01";break;case J.reposDir:w=`\u8BF7\u9009\u62E9 ${t.selectedRepos} \u4ED3\u5E93\u4E0B\u7684\u4E00\u4E2A\u76EE\u5F55\uFF01`;break;default:w="\u8BF7\u5728\u8F93\u5165\u6846\u8F93\u5165\u4E00\u4E2A\u65B0\u76EE\u5F55\uFF01";break}V.warning(w)}else n.push("/upload")}const Y={lazy:!0,checkStrictly:!0,async lazyLoad(A,D){const{level:w,pathLabels:z}=A;let te;w===0?te=t.dirList:te=await lt(z.join("/")),D(te?te.map(ne=>({value:ne.value,label:ne.label,leaf:w>=2})):[])}};function ue(A){t.selectedDirList=A,t.selectedDir=A.join("/"),c()}return K(()=>o,A=>{A||(a.value=!1,i.value=!1)}),(A,D)=>{const w=F("el-input"),z=F("el-form-item"),te=F("el-button"),ne=F("el-form"),He=F("el-option"),je=F("el-select"),De=F("el-radio"),Ie=F("el-tooltip"),It=F("el-radio-group"),St=F("el-cascader"),Te=Se("loading");return d(),E("div",On,[f(ne,{"label-width":"70rem","label-position":l(p),class:"config-form",size:l(u).elementPlusSize},{default:g(()=>[f(z,{label:"Token"},{default:g(()=>[f(w,{modelValue:l(t).token,"onUpdate:modelValue":D[0]||(D[0]=L=>l(t).token=L),clearable:"",autofocus:!l(t).token},null,8,["modelValue","autofocus"])]),_:1}),f(z,{class:"operation"},{default:g(()=>[f(te,{plain:"",size:l(u).elementPlusSize,type:"primary","native-type":"submit",onClick:D[1]||(D[1]=fe(L=>U(),["prevent"]))},{default:g(()=>[xn]),_:1},8,["size"])]),_:1})]),_:1},8,["label-position","size"]),l(t).token?se((d(),b(ne,{key:0,"label-width":"70rem","label-position":l(p),"element-loading-text":"\u52A0\u8F7D\u4E2D...",size:l(u).elementPlusSize},{default:g(()=>[l(t).owner?(d(),b(z,{key:0,label:"\u7528\u6237\u540D"},{default:g(()=>[f(w,{modelValue:l(t).owner,"onUpdate:modelValue":D[2]||(D[2]=L=>l(t).owner=L),readonly:""},null,8,["modelValue"])]),_:1})):h("",!0),l(t).email?(d(),b(z,{key:1,label:"\u90AE\u7BB1"},{default:g(()=>[f(w,{modelValue:l(t).email,"onUpdate:modelValue":D[3]||(D[3]=L=>l(t).email=L),readonly:""},null,8,["modelValue"])]),_:1})):h("",!0),l(t).reposList.length?(d(),b(z,{key:2,label:"\u9009\u62E9\u4ED3\u5E93"},{default:g(()=>[f(je,{modelValue:l(t).selectedRepos,"onUpdate:modelValue":D[4]||(D[4]=L=>l(t).selectedRepos=L),filterable:"",style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u56FE\u5E8A\u4ED3\u5E93...",onChange:I},{default:g(()=>[(d(!0),E(oe,null,ie(l(t).reposList,(L,Oe)=>(d(),b(He,{key:Oe,label:L.label,value:L.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):h("",!0)]),_:1},8,["label-position","size"])),[[Te,a.value]]):h("",!0),l(t).selectedRepos&&l(t).branchList.length?se((d(),b(ne,{key:1,"label-width":"70rem","label-position":l(p),"element-loading-text":"\u52A0\u8F7D\u4E2D...",size:l(u).elementPlusSize},{default:g(()=>[(l(t).selectedRepos,h("",!0)),l(t).branchList.length>1&&l(t).branchMode==="reposBranch"?(d(),b(z,{key:1,label:"\u9009\u62E9\u5206\u652F"},{default:g(()=>[f(je,{modelValue:l(t).selectedBranch,"onUpdate:modelValue":D[6]||(D[6]=L=>l(t).selectedBranch=L),filterable:"",style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u5206\u652F...",onChange:$},{default:g(()=>[(d(!0),E(oe,null,ie(l(t).branchList,(L,Oe)=>(d(),b(He,{key:Oe,label:L.label,value:L.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):h("",!0),l(t).branchMode==="newBranch"?(d(),b(z,{key:2,label:"\u65B0\u5EFA\u5206\u652F"},{default:g(()=>[f(w,{modelValue:l(t).selectedBranch,"onUpdate:modelValue":D[7]||(D[7]=L=>l(t).selectedBranch=L),onInput:D[8]||(D[8]=L=>c()),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u65B0\u5EFA\u7684\u5206\u652F..."},null,8,["modelValue"])]),_:1})):h("",!0)]),_:1},8,["label-position","size"])),[[Te,_.value]]):h("",!0),l(t).selectedBranch?se((d(),b(ne,{key:2,"label-width":"70px","label-position":l(p),"element-loading-text":"\u52A0\u8F7D\u4E2D...",size:l(u).elementPlusSize},{default:g(()=>[l(t).selectedBranch?(d(),b(z,{key:0,label:"\u76EE\u5F55\u65B9\u5F0F"},{default:g(()=>[f(It,{modelValue:l(t).dirMode,"onUpdate:modelValue":D[9]||(D[9]=L=>l(t).dirMode=L),onChange:N},{default:g(()=>[f(Ie,{content:"\u624B\u52A8\u8F93\u5165\u4E00\u4E2A\u65B0\u76EE\u5F55",placement:"top",offset:-1},{default:g(()=>[f(De,{label:"newDir"},{default:g(()=>[Mn]),_:1})]),_:1}),f(Ie,{content:"\u56FE\u7247\u5B58\u50A8\u5728 "+l(t).selectedBranch+" \u5206\u652F\u7684\u6839\u76EE\u5F55\u4E0B",placement:"top",offset:-1},{default:g(()=>[f(De,{label:"rootDir"},{default:g(()=>[Pn]),_:1})]),_:1},8,["content"]),f(Ie,{content:"\u6839\u636E\u65E5\u671F\u81EA\u52A8\u521B\u5EFA\u683C\u5F0F YYYYMMDD \u7684\u76EE\u5F55",placement:"top",offset:-1},{default:g(()=>[f(De,{label:"autoDir"},{default:g(()=>[Rn]),_:1})]),_:1}),l(t).dirList.length&&l(t).branchMode!=="newBranch"?(d(),b(Ie,{key:0,content:"\u9009\u62E9 "+l(t).selectedBranch+" \u5206\u652F\u4E0B\u7684\u4E00\u4E2A\u76EE\u5F55",placement:"top",offset:-1},{default:g(()=>[f(De,{label:"reposDir"},{default:g(()=>[y(" \u9009\u62E9 "+O(l(t).selectedRepos)+" \u4ED3\u5E93\u76EE\u5F55 ",1)]),_:1})]),_:1},8,["content"])):h("",!0)]),_:1},8,["modelValue"])]),_:1})):h("",!0),l(t).dirMode==="autoDir"?(d(),b(z,{key:1,label:"\u81EA\u52A8\u76EE\u5F55"},{default:g(()=>[f(w,{modelValue:l(t).selectedDir,"onUpdate:modelValue":D[10]||(D[10]=L=>l(t).selectedDir=L),readonly:""},null,8,["modelValue"])]),_:1})):h("",!0),l(t).dirMode==="rootDir"?(d(),b(z,{key:2,label:"\u6839\u76EE\u5F55"},{default:g(()=>[f(w,{modelValue:l(t).selectedDir,"onUpdate:modelValue":D[11]||(D[11]=L=>l(t).selectedDir=L),readonly:""},null,8,["modelValue"])]),_:1})):h("",!0),l(t).dirMode==="newDir"?(d(),b(z,{key:3,label:"\u65B0\u5EFA\u76EE\u5F55"},{default:g(()=>[f(w,{modelValue:l(t).selectedDir,"onUpdate:modelValue":D[12]||(D[12]=L=>l(t).selectedDir=L),onInput:D[13]||(D[13]=L=>c()),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u65B0\u5EFA\u7684\u76EE\u5F55..."},null,8,["modelValue"])]),_:1})):h("",!0),l(t).dirList.length&&l(t).dirMode==="reposDir"&&l(t).branchMode!=="newBranch"?(d(),b(z,{key:4,label:"\u9009\u62E9\u76EE\u5F55"},{default:g(()=>[(d(),b(St,{style:{width:"100%"},props:Y,key:m.value,modelValue:l(t).selectedDirList,"onUpdate:modelValue":D[14]||(D[14]=L=>l(t).selectedDirList=L),filterable:"",placeholder:"\u8BF7\u9009\u62E9\u4E00\u4E2A\u76EE\u5F55...",clearable:"",onChange:ue},null,8,["modelValue"]))]),_:1})):h("",!0)]),_:1},8,["label-position","size"])),[[Te,i.value]]):h("",!0),f(ne,{"label-width":"70px",size:l(u).elementPlusSize,"label-position":l(p)},{default:g(()=>[f(z,{class:"operation"},{default:g(()=>[l(t).owner?(d(),b(te,{key:0,plain:"",size:l(u).elementPlusSize,type:"warning",onClick:D[15]||(D[15]=L=>G())},{default:g(()=>[Vn]),_:1},8,["size"])):h("",!0),l(t).selectedRepos?(d(),b(te,{key:1,plain:"",size:l(u).elementPlusSize,type:"success",onClick:X},{default:g(()=>[Nn]),_:1},8,["size"])):h("",!0)]),_:1})]),_:1},8,["size","label-position"])])}}});var zn=R(Gn,[["__scopeId","data-v-969c0932"]]),rt=()=>({uuid:"",uploadStatus:{progress:0,uploading:!1},imgData:{base64Content:"",base64Url:""},fileInfo:{size:0,lastModified:0},filename:{name:"",hash:"",suffix:"",prefixName:"",now:"",initName:"",newName:"xxx",isHashRename:!0,isRename:!1,isPrefix:!1},externalLink:{github:"",cdn:"",markdown_gh:"",markdown_cdn:""}});function Hn(e,n){const s=document.createElement("canvas"),t=s.getContext("2d"),o=new Image;return o.crossOrigin="Anonymous",o.src=e,new Promise(u=>{o.onload=()=>{const{width:a}=o,{height:i}=o;s.width=a,s.height=i,t==null||t.drawImage(o,0,0,a,i);const _=s.toDataURL(`image/${n}`);u(_)}})}function jn(e,n){const s=C(()=>P.getters.getUserSettings).value,t=rt();t.imgData.base64Url=e,t.imgData.base64Content=e.split(",")[1];const{name:o,hash:u,suffix:a}=it(n.name);return t.uuid=u,t.fileInfo.size=n.size,t.fileInfo.originSize=n.size,t.fileInfo.lastModified=n.lastModified,t.filename.name=o,t.filename.hash=u,t.filename.suffix=a,t.filename.now=s.defaultHash?`${o}.${u}.${a}`:`${o}.${a}`,t.filename.initName=o,t.filename.isHashRename=s.defaultHash,t}const Xn=(e,n)=>{let s="";return e.selectedDir!=="/"&&(s=`${e.selectedDir}/`),`/repos/${e.owner}/${e.selectedRepos}/contents/${s}${n}`};function ct(e,n){const{selectedBranch:s,email:t,owner:o}=e;n.uploadStatus.uploading=!0;const u={message:"Upload pictures via PicX(https://github.com/XPoet/picx)",branch:s,content:n.imgData.base64Content};return t&&(u.committer={name:o,email:t}),new Promise((a,i)=>{q.put(Xn(e,n.filename.now),u).then(_=>{_&&_.status===201?(Yn(_,n,e),P.dispatch("TO_UPLOAD_IMAGE_UPLOADED",n.uuid),a(!0)):(n.uploadStatus.uploading=!1,a(!1))}).catch(_=>{i(_)})})}function Yn(e,n,s){const t=P.getters.getUserSettings;n.uploadStatus.progress=100,n.uploadStatus.uploading=!1,n.externalLink.github=ae(M.gh,e.data.content,s),n.externalLink.cdn=ae(M.cdn,e.data.content,s),n.externalLink.markdown_gh=ae(M.md_gh,e.data.content,s),n.externalLink.markdown_cdn=ae(M.md_cdn,e.data.content,s);const o={type:"image",uuid:n.uuid,dir:s.selectedDir,name:e.data.content.name,path:e.data.content.path,sha:e.data.content.sha,github_url:n.externalLink.github,cdn_url:n.externalLink.cdn,md_gh_url:n.externalLink.markdown_gh,md_cdn_url:n.externalLink.markdown_cdn,is_transform_md:t.defaultMarkdown,deleting:!1,size:n.fileInfo.size,lastModified:n.fileInfo.lastModified};n.uploadedImg=o,P.dispatch("UPLOADED_LIST_ADD",o),P.dispatch("DIR_IMAGE_LIST_ADD_DIR",s.selectedDir),P.dispatch("DIR_IMAGE_LIST_ADD_IMAGE",o)}const dt=e=>(Q("data-v-3a2dba76"),e=e(),Z(),e),Jn={class:"copy-external-link-box"},qn={key:0,t:"1631782798077",class:"markdown-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2861",width:"26",height:"26"},Kn=dt(()=>r("path",{d:"M92 192C42.24 192 0 232.128 0 282.016v459.968C0 791.904 42.24 832 92 832h840C981.76 832 1024 791.872 1024 741.984V282.016C1024 232.16 981.76 192 932 192z m0 64h840c16.512 0 28 12.256 28 26.016v459.968c0 13.76-11.52 26.016-28 26.016H92C75.488 768 64 755.744 64 741.984V282.016c0-13.76 11.52-25.984 28-25.984zM160 352v320h96v-212.992l96 127.008 96-127.04V672h96V352h-96l-96 128-96-128z m544 0v160h-96l144 160 144-160h-96v-160z","p-id":"2862",fill:"#808080"},null,-1)),Wn=[Kn],Qn={key:1,t:"1631784688556",class:"markdown-icon active",viewBox:"0 0 1280 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3242",width:"26",height:"26"},Zn=dt(()=>r("path",{d:"M1187.6 118.2H92.4C41.4 118.2 0 159.6 0 210.4v603c0 51 41.4 92.4 92.4 92.4h1095.4c51 0 92.4-41.4 92.2-92.2V210.4c0-50.8-41.4-92.2-92.4-92.2zM677 721.2H554v-240l-123 153.8-123-153.8v240H184.6V302.8h123l123 153.8 123-153.8h123v418.4z m270.6 6.2L763 512H886V302.8h123V512H1132z","p-id":"3243",fill:"#3c3c3c"},null,-1)),es=[Zn],ts={class:"btn-box"},ns=x({props:{imgObj:{type:Object,default:()=>{}}},setup(e){const n=e;C(()=>P.getters.getUserConfigInfo);const s=C(()=>P.getters.getUserSettings),t=B(n.imgObj),o=M;function u(a){let i="",_="";const p=t.value.is_transform_md;switch(a){case M.gh:p?(i=t.value.md_gh_url,_="Markdown \u683C\u5F0F\u7684 GitHub"):(i=t.value.github_url,_="GitHub");break;case M.cdn:p?(i=t.value.md_cdn_url,_="Markdown \u683C\u5F0F\u7684 CDN"):(i=t.value.cdn_url,_="CDN");break}let m=document.querySelector(".temp-external-link");m||(m=document.createElement("textarea"),m.setAttribute("class","temp-external-link"),m.style.position="absolute",m.style.top="-99999rem",m.style.left="-99999rem",document.body.appendChild(m)),m.value=i,m.select(),document.execCommand("copy"),V.success(`${_} \u5916\u94FE\u590D\u5236\u6210\u529F\uFF01`)}return an(()=>{t.value=n.imgObj}),le(()=>{t.value.is_transform_md=s.value.defaultMarkdown}),(a,i)=>{const _=F("el-tooltip");return d(),E("div",Jn,[r("div",null,[f(_,{content:t.value.is_transform_md?"\u70B9\u51FB\u8F6C\u6362\u666E\u901A\u5916\u94FE":"\u70B9\u51FB\u8F6C\u6362 Markdown \u683C\u5F0F\u5916\u94FE",placement:"top"},{default:g(()=>[r("div",{class:"markdown-icon-box flex-center",onClick:i[0]||(i[0]=p=>t.value.is_transform_md=!t.value.is_transform_md)},[t.value.is_transform_md?h("",!0):(d(),E("svg",qn,Wn)),t.value.is_transform_md?(d(),E("svg",Qn,es)):h("",!0)])]),_:1},8,["content"])]),r("div",ts,[f(_,{content:"\u70B9\u51FB\u590D\u5236 GitHub \u5916\u94FE",placement:"top"},{default:g(()=>[r("span",{class:"btn-item copy-url github flex-center",onClick:i[1]||(i[1]=p=>u(l(o).gh))}," GitHub ")]),_:1}),f(_,{content:"\u70B9\u51FB\u590D\u5236 CDN \u5916\u94FE",placement:"top"},{default:g(()=>[r("span",{class:"btn-item copy-url cdn flex-center",onClick:i[2]||(i[2]=p=>u(l(o).cdn))}," CDN ")]),_:1})])])}}});var _t=R(ns,[["__scopeId","data-v-3a2dba76"]]);const ss=e=>(Q("data-v-0d1308e5"),e=e(),Z(),e),os={class:"image-box"},as=["src"],us={class:"info-box"},is={class:"image-info"},ls={key:1,class:"filename"},rs={class:"image-operation"},cs={class:"operation-box"},ds={class:"operation-left"},_s={key:0,class:"el-icon-check"},ps={class:"operation-right"},ms=ss(()=>r("div",{class:"btn"},[r("i",{class:"el-icon-more"})],-1)),fs=y(" \u5220\u9664 "),gs=y("\u91CD\u547D\u540D"),hs=y(" \u5C5E\u6027 "),Es=x({props:{listing:{type:Boolean,default:!1},imageObj:{type:Object,default:()=>{}},isUploaded:{type:Boolean,default:!1},index:{type:Number},modelValue:{type:Number}},emits:["update:modelValue"],setup(e,{emit:n}){const s=e,t=H(),o=un(),u=C(()=>t.getters.getUserConfigInfo),a=C(()=>o.path==="/management"),i=B(),_=B(!1),p=B("");C(()=>t.getters.getToUploadImage).value;const m=B(!1),c=(I,$=!1)=>{$||(I.deleting=!0);const{owner:j,selectedRepos:G}=u.value;return new Promise(X=>{q.delete(`/repos/${j}/${G}/contents/${I.path}`,{data:{owner:j,repo:G,path:I.path,message:"delete picture via PicX(https://github.com/XPoet/picx)",sha:I.sha}}).then(Y=>{console.log("[deleteImage] ",Y),Y&&Y.status===200?(I.deleting=!1,V.success(`${$?"\u66F4\u65B0":"\u5220\u9664"}\u6210\u529F\uFF01`),t.dispatch("UPLOADED_LIST_REMOVE",I.uuid),t.dispatch("DIR_IMAGE_LIST_REMOVE",I),X(!0)):I.deleting=!1})})},S=I=>{ge.confirm(`
    <div>\u6B64\u64CD\u4F5C\u5C06\u4F1A\u6C38\u4E45\u5220\u9664\u56FE\u7247\uFF1A</div>
    <strong>${I.name}</strong>
    `,"\u5220\u9664\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",dangerouslyUseHTMLString:!0,iconClass:"el-icon-warning"}).then(()=>{c(I)}).catch(()=>{console.log("\u53D6\u6D88\u5220\u9664")})},v=I=>{I.checked=!I.checked,t.commit("IMAGE_CARD",{imageObj:I})},T=async I=>{n("update:modelValue",s.index),p.value=Ee(I.name),await qe(()=>{var $;($=i.value)==null||$.focus()})},N=async()=>{n("update:modelValue",void 0);const{imageObj:I}=s;if(p.value===Ee(I.name)||!p.value)return;const $=async()=>{const j=Me.service({lock:!0,text:"\u66F4\u65B0\u4E2D..."}),G=Ne(I.name),X={name:p.value+I.name.substring(I.name.indexOf(".")),size:I.size,lastModified:Date.now(),type:`image/${G}`},Y=await Hn(I.cdn_url,G);if(Y){const ue=jn(Y,X);ue&&await ct(u.value,ue)&&(p.value="",await c(I,!0),await t.dispatch("UPLOADED_LIST_REMOVE",ue.uuid))}j.close()};ge.confirm(`\u786E\u5B9A\u91CD\u547D\u540D\u4E3A ${p.value} \uFF1F`,"\u91CD\u547D\u540D\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",iconClass:"el-icon-warning"}).then(async()=>{await $()}).catch(()=>{console.log("\u53D6\u6D88")})},k=I=>{m.value=I},U=I=>{ge.confirm(`
    <div>\u56FE\u7247\u540D\u79F0\uFF1A<strong>${I.name}</strong></div>
    <div>\u56FE\u7247\u5927\u5C0F\uFF1A<strong>${we(I.size)} KB</strong></div>
    `,"\u56FE\u7247\u5C5E\u6027",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",showCancelButton:!1,showConfirmButton:!1,dangerouslyUseHTMLString:!0}).then(()=>{console.log("Confirm")}).catch(()=>{console.log("Close")})};return(I,$)=>{const j=F("el-input"),G=F("el-dropdown-item"),X=F("el-dropdown-menu"),Y=F("el-dropdown"),ue=Se("loading");return se((d(),E("div",{class:W(["image-card",{listing:e.listing,checked:e.imageObj.checked}]),"element-loading-text":"\u5220\u9664\u4E2D...",onMouseenter:$[5]||($[5]=A=>_.value=!0),onMouseleave:$[6]||($[6]=A=>_.value=!1)},[r("div",os,[r("img",{"data-fancybox":"gallery",src:e.imageObj.cdn_url},null,8,as)]),r("div",us,[r("div",is,[p.value&&s.modelValue===s.index?(d(),b(j,{key:0,class:"rename-input",modelValue:p.value,"onUpdate:modelValue":$[0]||($[0]=A=>p.value=A),onBlur:N,ref_key:"renameInput",ref:i},null,8,["modelValue"])):(d(),E("div",ls,O(e.imageObj.name),1)),r("div",rs,[f(_t,{"img-obj":e.imageObj},null,8,["img-obj"])])])]),se(r("div",cs,[r("div",ds,[l(a)?(d(),E("div",{key:0,class:W([e.imageObj.checked?"picked-btn":"pick-btn","btn"]),onClick:$[1]||($[1]=A=>v(e.imageObj))},[e.imageObj.checked?(d(),E("i",_s)):h("",!0)],2)):h("",!0)]),r("div",ps,[f(Y,{size:"small",trigger:"click",onVisibleChange:k},{dropdown:g(()=>[f(X,null,{default:g(()=>[f(G,{onClick:$[2]||($[2]=A=>S(e.imageObj))},{default:g(()=>[fs]),_:1}),f(G,{onClick:$[3]||($[3]=A=>T(e.imageObj))},{default:g(()=>[gs]),_:1}),f(G,{onClick:$[4]||($[4]=A=>U(e.imageObj))},{default:g(()=>[hs]),_:1})]),_:1})]),default:g(()=>[ms]),_:1})])],512),[[Je,_.value||m.value||e.imageObj.checked]])],34)),[[ue,e.imageObj.deleting]])}}});var pt=R(Es,[["__scopeId","data-v-0d1308e5"]]),ee;(function(e){e.uploaded="uploaded",e.allUploaded="allUploaded",e.uploadFail="uploadFail"})(ee||(ee={}));const vs={key:0,class:"selected-info-bar-box"},Fs={class:"info-item"},Ds=y(" \u4ED3\u5E93\uFF1A "),Is={key:0,class:"info-item"},Ss=y(" \u5206\u652F\uFF1A "),As={key:1,class:"info-item"},Cs=y(" \u76EE\u5F55\uFF1A "),bs=x({setup(e){const n=H(),s=C(()=>n.getters.getUserConfigInfo),t=C(()=>n.getters.getUserSettings);return(o,u)=>{const a=F("el-tag");return l(s).selectedRepos?(d(),E("div",vs,[r("span",Fs,[Ds,f(a,{size:l(t).elementPlusSize},{default:g(()=>[y(O(l(s).selectedRepos),1)]),_:1},8,["size"])]),l(s).selectedBranch?(d(),E("span",Is,[Ss,f(a,{size:l(t).elementPlusSize},{default:g(()=>[y(O(l(s).selectedBranch),1)]),_:1},8,["size"])])):h("",!0),l(s).selectedDir?(d(),E("span",As,[Cs,f(a,{size:l(t).elementPlusSize},{default:g(()=>[y(O(l(s).selectedDir),1)]),_:1},8,["size"])])):h("",!0)])):h("",!0)}}});var mt=R(bs,[["__scopeId","data-v-e4dcde6e"]]);const $s=x({name:"to-upload-image-card",components:{copyExternalLink:_t,selectedInfoBar:mt},props:{loadingAllImage:{type:Boolean,default:!1}},setup(){const e=H(),n=Ae({isShowDialog:!1,curImgInfo:{size:""},userConfigInfo:C(()=>e.getters.getUserConfigInfo).value,userSettings:C(()=>e.getters.getUserSettings).value,toUploadImage:C(()=>e.getters.getToUploadImage).value,hashRename(t,o){t?o.filename.now=`${o.filename.name}.${o.filename.hash}.${o.filename.suffix}`:o.filename.now=`${o.filename.name}.${o.filename.suffix}`},prefixName(t,o){t?o.filename.name=`${o.filename.prefixName}${o.filename.initName}`:o.filename.name=`${o.filename.initName}`,o.filename.isHashRename?o.filename.now=`${o.filename.name}.${o.filename.hash}.${o.filename.suffix}`:o.filename.now=`${o.filename.name}.${o.filename.suffix}`},rename(t,o){t?o.filename.name=o.filename.newName.trim().replace(/\s+/g,"-"):n.prefixName(o.filename.isPrefix,o),o.filename.isHashRename?o.filename.now=`${o.filename.name}.${o.filename.hash}.${o.filename.suffix}`:o.filename.now=`${o.filename.name}.${o.filename.suffix}`},getFileSize(t){return`${we(t)} KB`},formatLastModified(t){return Le.formatTimestamp(t)},async uploadImage_all(t){const o=this.toUploadImage.uploadedNumber;return o>=this.toUploadImage.list.length?ee.uploaded:await ct(t,this.toUploadImage.list[o])?o<this.toUploadImage.list.length?(await this.uploadImage_all(t),ee.allUploaded):ee.uploaded:ee.uploadFail}}),s=t=>{e.dispatch("TO_UPLOAD_IMAGE_LIST_REMOVE",t.uuid)};return le(()=>{const{defaultHash:t,defaultPrefix:o,prefixName:u}=n.userSettings;n.toUploadImage.list.forEach(a=>{a.filename.isPrefix=o,a.filename.prefixName=u,n.prefixName(o,a),a.filename.isHashRename=t,n.hashRename(t,a)})}),xe(de({},Ce(n)),{removeToUploadImage:s})}}),ks={key:0,class:"to-upload-image-list-card"},Ls={class:"header"},ys={key:0},ws={key:0,class:"body"},Us={class:"image-uploading-info-box"},Bs={class:"left-image-box flex-center"},Ts={class:"image-box"},Os=["src"],xs={class:"right-operation-box"},Ms={class:"top"},Ps={class:"image-name"},Rs={class:"image-info"},Vs={key:0,class:"file-size item"},Ns={class:"last-modified item"},Gs={key:0,class:"bottom rename-operation"},zs={key:1,class:"bottom rename-operation"},Hs={key:0,class:"el-icon-upload2"},js={key:1,class:"el-icon-loading"},Xs={key:2,class:"el-icon-check"},Ys=["onClick"],Js=r("i",{class:"el-icon-delete"},null,-1);function qs(e,n,s,t,o,u){const a=F("selected-info-bar"),i=F("el-checkbox"),_=F("el-input"),p=F("copy-externalLink"),m=F("el-tooltip");return e.toUploadImage.list.length||e.userConfigInfo.selectedRepos?(d(),E("div",ks,[r("div",Ls,[r("div",null,[f(a)]),r("div",null,[e.toUploadImage.list.length?(d(),E("span",ys," \u5DF2\u4E0A\u4F20\uFF1A"+O(e.toUploadImage.uploadedNumber)+" / "+O(e.toUploadImage.list.length),1)):h("",!0)])]),e.toUploadImage.list.length?(d(),E("div",ws,[r("ul",Us,[(d(!0),E(oe,null,ie(e.toUploadImage.list,(c,S)=>(d(),E("li",{class:W(["image-uploading-info-item",{disable:e.loadingAllImage}]),key:S},[r("div",Bs,[r("div",Ts,[r("img",{"data-fancybox":"gallery",src:c.imgData.base64Url},null,8,Os)])]),r("div",xs,[r("div",Ms,[r("div",Ps,O(c.filename.now),1),r("div",Rs,[e.userSettings.isCompress?(d(),E("span",Vs,[r("del",null,O(e.getFileSize(c.fileInfo.originSize)),1)])):h("",!0),r("span",{class:W(["file-size item",{compressed:e.userSettings.isCompress}])},O(e.getFileSize(c.fileInfo.size)),3),r("span",Ns,O(e.formatLastModified(c.fileInfo.lastModified)),1)])]),!c.uploadStatus.uploading&&c.uploadStatus.progress!==100?(d(),E("div",Gs,[f(i,{label:"\u54C8\u5E0C\u5316",modelValue:c.filename.isHashRename,"onUpdate:modelValue":v=>c.filename.isHashRename=v,onChange:v=>e.hashRename(v,c)},null,8,["modelValue","onUpdate:modelValue","onChange"]),f(i,{label:"\u91CD\u547D\u540D",modelValue:c.filename.isRename,"onUpdate:modelValue":v=>c.filename.isRename=v,onChange:v=>e.rename(v,c)},null,8,["modelValue","onUpdate:modelValue","onChange"]),c.filename.isRename?(d(),b(_,{key:0,class:"rename-input",size:"mini",modelValue:c.filename.newName,"onUpdate:modelValue":v=>c.filename.newName=v,onInput:v=>e.rename(v,c),clearable:""},null,8,["modelValue","onUpdate:modelValue","onInput"])):h("",!0),!c.filename.isRename&&e.userConfigInfo.defaultPrefix&&e.userConfigInfo.prefixName?(d(),b(i,{key:1,label:"\u547D\u540D\u524D\u7F00",modelValue:c.filename.isPrefix,"onUpdate:modelValue":v=>c.filename.isPrefix=v,onChange:v=>e.prefixName(v,c)},null,8,["modelValue","onUpdate:modelValue","onChange"])):h("",!0)])):h("",!0),!c.uploadStatus.uploading&&c.uploadStatus.progress===100?(d(),E("div",zs,[f(p,{"img-obj":c.uploadedImg},null,8,["img-obj"])])):h("",!0)]),r("div",{class:W(["upload-status-box",{"wait-upload":!c.uploadStatus.uploading&&c.uploadStatus.progress!==100,uploading:c.uploadStatus.uploading&&c.uploadStatus.progress!==100,uploaded:!c.uploadStatus.uploading&&c.uploadStatus.progress===100}])},[!c.uploadStatus.uploading&&c.uploadStatus.progress!==100?(d(),E("i",Hs)):h("",!0),c.uploadStatus.uploading&&c.uploadStatus.progress!==100?(d(),E("i",js)):h("",!0),!c.uploadStatus.uploading&&c.uploadStatus.progress===100?(d(),E("i",Xs)):h("",!0)],2),c.uploadStatus.progress!==100&&!c.uploadStatus.uploading?(d(),E("div",{key:0,class:"remove-to-upload-image",onClick:v=>e.removeToUploadImage(c)},[f(m,{effect:"dark",content:"\u79FB\u9664",placement:"top"},{default:g(()=>[Js]),_:1})],8,Ys)):h("",!0)],2))),128))])])):h("",!0)])):h("",!0)}var Ks=R($s,[["render",qs]]);const Ge=async(e,n)=>{if(!e)return null;if(!ut(e.type))return V.error("\u8BE5\u6587\u4EF6\u683C\u5F0F\u4E0D\u652F\u6301\uFF01"),null;let s;const{isCompress:t,compressEncoder:o}=P.getters.getUserSettings,u=e.type==="image/gif";if(!u&&t){const a=Me.service({target:".upload-area",text:"\u6B63\u5728\u538B\u7F29\u56FE\u7247"});s=await yn(e,o),a.close()}return new Promise(a=>{const i=new FileReader;i.readAsDataURL(!u&&t?s:e),i.onload=_=>{var c;const p=(c=_.target)==null?void 0:c.result,m=we(p.length);m>=n?ge.confirm(`\u5F53\u524D\u56FE\u7247 ${(m/1024).toFixed(2)} M\uFF0CCDN \u53EA\u80FD\u52A0\u901F\u5C0F\u4E8E 50 MB \u7684\u56FE\u7247\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u7B2C\u4E09\u65B9\u5DE5\u5177 TinyPNG \u538B\u7F29`,"\u56FE\u7247\u8FC7\u5927\uFF0C\u7981\u6B62\u4E0A\u4F20",{confirmButtonText:"\u524D\u5F80 TinyPNG",cancelButtonText:"\u653E\u5F03\u4E0A\u4F20"}).then(()=>{window.open("https://tinypng.com/")}).catch(()=>{console.log("\u653E\u5F03\u4E0A\u4F20")}):a({base64:p,originalFile:e,compressFile:!u&&t?s:e})}})},Ws=(e,n)=>e.clipboardData&&e.clipboardData.items?new Promise(s=>{var t;for(let o=0,u=e.clipboardData.items.length;o<u;o++){const a=e.clipboardData.items[o];if(a.kind==="file"){const i=a.getAsFile();(t=Ge(i,n))==null||t.then(_=>{if(!_)return;const{base64:p,originalFile:m,compressFile:c}=_;s({base64:p,originalFile:m,compressFile:c})})}}}):null;const Qs=x({name:"upload-area",props:{imageLoading:{type:Boolean,default:!1}},setup(){const e=H(),n=Ae({userConfigInfo:C(()=>e.getters.getUserConfigInfo).value,userSettings:C(()=>e.getters.getUserSettings).value,uploadAreaActive:C(()=>e.getters.getUploadAreaActive),uploadSettings:C(()=>e.getters.getUploadSettings).value,toUploadImage:C(()=>e.getters.getToUploadImage).value,onSelect(s){var t;e.commit("CHANGE_UPLOAD_AREA_ACTIVE",!0);for(const o of s.target.files)(t=Ge(o,this.uploadSettings.imageMaxSize))==null||t.then(u=>{if(!u)return;const{base64:a,originalFile:i,compressFile:_}=u;this.getImage(a,i,_)})},onDrop(s){var t;e.commit("CHANGE_UPLOAD_AREA_ACTIVE",!0);for(const o of s.dataTransfer.files)(t=Ge(o,this.uploadSettings.imageMaxSize))==null||t.then(u=>{if(!u)return;const{base64:a,originalFile:i,compressFile:_}=u;this.getImage(a,i,_)})},async onPaste(s){const{base64:t,originalFile:o,compressFile:u}=await Ws(s,this.uploadSettings.imageMaxSize);this.getImage(t,o,u)},getImage(s,t,o){this.toUploadImage.list.length===this.toUploadImage.uploadedNumber&&this.toUploadImage.list.length>0&&this.toUploadImage.uploadedNumber>0&&(e.dispatch("TO_UPLOAD_IMAGE_CLEAN_LIST"),e.dispatch("TO_UPLOAD_IMAGE_CLEAN_UPLOADED_NUMBER"));const{defaultHash:u,isCompress:a,defaultPrefix:i,prefixName:_}=this.userSettings,p=a?o:t,m=rt();m.imgData.base64Url=s,m.imgData.base64Content=s.split(",")[1];const{name:c,hash:S,suffix:v}=it(p==null?void 0:p.name);m.uuid=S,m.fileInfo.compressedSize=o==null?void 0:o.size,m.fileInfo.originSize=t.size,m.fileInfo.size=p==null?void 0:p.size,m.fileInfo.lastModified=p==null?void 0:p.lastModified,m.filename.initName=c,m.filename.name=i?`${_}${c}`:c,m.filename.prefixName=_,m.filename.hash=S,m.filename.suffix=v,m.filename.now=u?`${m.filename.name}.${S}.${v}`:`${m.filename.name}.${v}`,m.filename.isHashRename=u,m.filename.isPrefix=i,e.dispatch("TO_UPLOAD_IMAGE_LIST_ADD",JSON.parse(JSON.stringify(m))),e.dispatch("TO_UPLOAD_IMAGE_SET_CURRENT",{uuid:S,base64Url:s})}});return de({},Ce(n))}}),ft=e=>(Q("data-v-6df8ce02"),e=e(),Z(),e),Zs={key:0,for:"uploader",class:"active-upload"},eo={key:1,class:"tips active-upload"},to=ft(()=>r("i",{class:"icon el-icon-upload active-upload"},null,-1)),no=ft(()=>r("div",{class:"text active-upload"},"\u62D6\u62FD\u3001\u7C98\u8D34\u3001\u6216\u70B9\u51FB\u6B64\u5904\u4E0A\u4F20",-1)),so=[to,no],oo=["src"];function ao(e,n,s,t,o,u){const a=Se("loading");return se((d(),E("div",{class:W(["upload-area active-upload",{focus:e.uploadAreaActive}]),onDragover:n[1]||(n[1]=fe(()=>{},["prevent"])),onDrop:n[2]||(n[2]=fe((...i)=>e.onDrop&&e.onDrop(...i),["stop","prevent"])),onPaste:n[3]||(n[3]=(...i)=>e.onPaste&&e.onPaste(...i)),"element-loading-text":"\u56FE\u7247\u4E0A\u4F20\u4E2D...","element-loading-background":"rgba(0, 0, 0, 0.5)"},[e.uploadAreaActive?(d(),E("label",Zs)):h("",!0),r("input",{id:"uploader",type:"file",onChange:n[0]||(n[0]=(...i)=>e.onSelect&&e.onSelect(...i)),multiple:"multiple"},null,32),e.toUploadImage.curImgBase64Url?h("",!0):(d(),E("div",eo,so)),e.toUploadImage.curImgBase64Url?(d(),E("img",{key:2,class:"active-upload",src:e.toUploadImage.curImgBase64Url,alt:"Pictures to be uploaded"},null,8,oo)):h("",!0)],34)),[[a,e.imageLoading]])}var uo=R(Qs,[["render",ao],["__scopeId","data-v-6df8ce02"]]);const io={class:"upload-page-container"},lo={key:0,class:"upload-page-left page-container",style:{width:"280rem"}},ro={class:"upload-page-right page-container"},co={class:"row-item"},_o={class:"content-box"},po={class:"row-item"},mo={class:"content-box"},fo={class:"row-item"},go={class:"content-box",style:{"text-align":"right"}},ho=y("\u91CD\u7F6E "),Eo=y(" \u4E0A\u4F20 "),vo=x({setup(e){const n=H(),s=me();B(null),B(null);const t=B(null),o=B(null),u=C(()=>n.getters.getUserConfigInfo),a=C(()=>n.getters.getUserSettings),i=C(()=>n.getters.getUserLoggingStatus),_=C(()=>n.getters.getUploadedImageList),p=C(()=>n.getters.getToUploadImage),m=B(!1),c=()=>{const{token:v,selectedRepos:T,selectedDir:N}=u.value;if(!v){V.error("\u8BF7\u5148\u5B8C\u6210\u56FE\u5E8A\u914D\u7F6E\uFF01"),s.push("/config");return}if(!T){V.error("\u8BF7\u9009\u62E9\u4E00\u4E2A\u4ED3\u5E93\uFF01"),s.push("/config");return}if(!N){V.error("\u76EE\u5F55\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),s.push("/config");return}if(p.value.list.length===0){V.error("\u56FE\u7247\u4E0D\u80FD\u4E3A\u7A7A\uFF01");return}if(p.value.list.length===p.value.uploadedNumber){V.error("\u8BF7\u9009\u62E9\u8981\u4E0A\u4F20\u7684\u56FE\u7247\uFF01");return}m.value=!0,t.value.uploadImage_all(u.value).then(k=>{switch(k){case ee.uploaded:case ee.allUploaded:m.value=!1,n.dispatch("TO_UPLOAD_IMAGE_CLEAN_URL");break;case ee.uploadFail:m.value=!1,n.dispatch("TO_UPLOAD_IMAGE_LIST_FAIL");break}}).catch(k=>{console.error("upload error: ",k),m.value=!1})},S=()=>{m.value=!1,n.dispatch("TO_UPLOAD_IMAGE_LOGOUT")};return K(()=>i,v=>{!v&&S()}),(v,T)=>{const N=F("el-button");return d(),E("div",io,[l(_).length&&l(a).elementPlusSize==="medium"?(d(),E("div",lo,[(d(!0),E(oe,null,ie(l(_),(k,U)=>(d(),E("div",{class:"uploaded-item",key:U},[f(pt,{"image-obj":k,"is-uploaded":!0},null,8,["image-obj"])]))),128))])):h("",!0),r("div",ro,[r("div",co,[r("div",_o,[f(uo,{"image-loading":m.value,ref_key:"uploadAreaDom",ref:o},null,8,["image-loading"])])]),r("div",po,[r("div",mo,[f(Ks,{ref_key:"toUploadImageCardDom",ref:t,"loading-all-image":m.value},null,8,["loading-all-image"])])]),r("div",fo,[r("div",go,[l(p).list.length?(d(),b(N,{key:0,plain:"",size:l(a).elementPlusSize,type:"warning",onClick:S},{default:g(()=>[ho]),_:1},8,["size"])):h("",!0),f(N,{plain:"",size:l(a).elementPlusSize,type:"primary",onClick:c},{default:g(()=>[Eo]),_:1},8,["size"])])])])])}}});const gt=e=>(Q("data-v-c87a38dc"),e=e(),Z(),e),Fo=gt(()=>r("div",{class:"icon"},[r("svg",{t:"1639999626518",class:"icon",viewBox:"0 0 1228 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3575",width:"200",height:"200"},[r("path",{d:"M1196.987733 212.5824v540.0576c0 39.594667-34.474667 71.3728-76.765866 71.3728H323.242667c-51.780267 0-88.746667-46.762667-73.250134-92.808533l126.737067-375.808H70.417067C31.675733 355.362133 0 326.4512 0 291.089067V98.372267C0 63.044267 31.675733 34.0992 70.417067 34.0992h378.811733c26.7264 0 51.029333 13.9264 63.010133 35.703467l39.048534 71.406933H1120.256c42.257067 0 76.8 32.119467 76.8 71.3728",fill:"#5398DF","p-id":"3576"}),r("path",{d:"M1128.721067 997.853867H68.266667a68.266667 68.266667 0 0 1-68.266667-68.266667V280.3712a68.266667 68.266667 0 0 1 68.266667-68.266667h1060.4544a68.266667 68.266667 0 0 1 68.266666 68.266667V929.5872a68.266667 68.266667 0 0 1-68.266666 68.266667",fill:"#85BCFF","p-id":"3577"})])],-1)),Do=gt(()=>r("div",{class:"icon"},[r("svg",{t:"1640264285200",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"29312",width:"200",height:"200"},[r("path",{d:"M426.666667 384V213.333333l-298.666667 298.666667 298.666667 298.666667v-174.933334c213.333333 0 362.666667 68.266667 469.333333 217.6-42.666667-213.333333-170.666667-426.666667-469.333333-469.333333z","p-id":"29313",fill:"#85BCFF"})])],-1)),Io={key:2,class:"text"},So={key:3,class:"text"},Ao=x({props:{folderObj:{type:Object,default:()=>{}},mode:{type:String,default:"dir"}},emits:["update:modelValue"],setup(e,{emit:n}){const s=e,t=H(),o=C(()=>t.getters.getUserConfigInfo).value,u=()=>{const{folderObj:a,mode:i}=s;if(i==="back"){const p=o.selectedDir;if(p==="/")return;const m=p.split("/");m.length===1?o.selectedDir="/":m.length>1&&(m.length-=1,o.selectedDir=m.join("/"))}else o.selectedDir=a.dirPath;const{selectedDir:_}=o;_==="/"?(o.selectedDirList=[],o.dirMode="rootDir"):(o.selectedDirList=_.split("/"),o.dirMode="reposDir"),t.dispatch("USER_CONFIG_INFO_PERSIST")};return(a,i)=>{const _=F("el-tooltip");return d(),E("div",{class:"folder-card",onDblclick:u},[e.mode==="dir"?(d(),b(_,{key:0,effect:"dark",content:"\u53CC\u51FB\u8FDB\u5165\u4E0B\u4E00\u7EA7\u76EE\u5F55",placement:"top"},{default:g(()=>[Fo]),_:1})):h("",!0),e.mode==="back"?(d(),b(_,{key:1,effect:"dark",content:"\u53CC\u51FB\u8FD4\u56DE\u4E0A\u4E00\u7EA7\u76EE\u5F55",placement:"top"},{default:g(()=>[Do]),_:1})):h("",!0),e.mode==="dir"?(d(),E("div",Io,O(e.folderObj.dir),1)):h("",!0),e.mode==="back"?(d(),E("div",So,"\u8FD4\u56DE\u4E0A\u4E00\u7EA7")):h("",!0)],32)}}});var ht=R(Ao,[["__scopeId","data-v-c87a38dc"]]);function Co(e,n,s){let t="";const o=document.querySelector(".temp-batch-externalink");o.value="",(e==null?void 0:e.length)>0?(e.forEach((u,a)=>{const i=u.is_transform_md;switch(n){case M.gh:i?t=u.md_gh_url:t=u.github_url;break;case M.cdn:i?t=u.md_cdn_url:t=u.cdn_url;break}a<e.length-1?o.value+=t+`
`:o.value+=t}),o.select(),document.execCommand("copy"),V.success(`${s}`)):console.warn("\u8BF7\u5148\u9009\u62E9\u56FE\u7247")}var ce;(function(e){e.deleted="deleted",e.allDeleted="allDeleted",e.deleteFail="deleteFail"})(ce||(ce={}));let ve=0;async function bo(e,n){e.deleting=!0;const{owner:s,selectedRepos:t}=n;return new Promise((o,u)=>{q.delete(`/repos/${s}/${t}/contents/${e.path}`,{data:{owner:s,repo:t,path:e.path,message:"delete picture via PicX(https://github.com/XPoet/picx)",sha:e.sha}}).then(a=>{a&&a.status===200?(e.deleting=!1,P.dispatch("UPLOADED_LIST_REMOVE",e.uuid),P.dispatch("DIR_IMAGE_LIST_REMOVE",e),o(!0)):(e.deleting=!1,o(!1))}).catch(a=>{u(a)})})}async function Et(e,n){return ve>=e.length?ce.deleted:await bo(e[ve],n)?ve<e.length&&(ve+=1,await Et(e,n))?(ve=0,ce.allDeleted):ce.deleted:ce.deleteFail}const $o=e=>(Q("data-v-033900dc"),e=e(),Z(),e),ko={key:0,class:"selector-wrapper"},Lo={class:"selector-left-box"},yo={class:"item"},wo={class:"selector-right-box"},Uo=$o(()=>r("textarea",{class:"temp-batch-externalink"},null,-1)),Bo=x({props:{currentDirImageList:{type:Array,default:()=>[]}},emits:["update:initImageList"],setup(e,{emit:n}){const s=e,t=H(),o=B(!1),u=C(()=>t.getters.getImageCardCheckedArr),a=C(()=>t.getters.getUserConfigInfo).value,i=C(()=>u.value.length||0);K(()=>i.value,(S,v)=>{const T=s.currentDirImageList.length;S===T?o.value=!0:o.value=!1});function _(){Co(u.value,M.cdn,"\u6279\u91CF\u590D\u5236\u94FE\u63A5\u6210\u529F")}function p(){s.currentDirImageList.forEach(S=>{S.checked&&(S.checked=!1)})}async function m(){var S;((S=u.value)==null?void 0:S.length)>0?ge.confirm("\u662F\u5426\u6279\u91CF\u5220\u9664\u5DF2\u9009\u4E2D\u7684\u56FE\u7247\uFF1F","\u5220\u9664\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",iconClass:"el-icon-warning"}).then(async()=>{await Et(u.value,a)===ce.allDeleted&&V.success("\u6279\u91CF\u5220\u9664\u6210\u529F\uFF01")}).catch(()=>{console.log("\u53D6\u6D88\u6279\u91CF\u5220\u9664")}):V.warning("\u8BF7\u5148\u9009\u62E9\u56FE\u7247")}function c(){let S=[];s.currentDirImageList.forEach(v=>{v.checked=o.value}),S=s.currentDirImageList,t.commit("REPLACE_IMAGE_CARD",{checkedImgArr:S})}return le(()=>{c()}),(S,v)=>{const T=F("el-checkbox"),N=F("el-tooltip");return l(i)?(d(),E("div",ko,[r("div",Lo,[f(T,{label:o.value?"\u53D6\u6D88\u5168\u9009":"\u5168\u9009",modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=k=>o.value=k),onChange:c},null,8,["label","modelValue"]),r("div",yo,"\u5DF2\u9009\u62E9 "+O(l(i))+" \u5F20\u56FE\u7247",1),r("div",{class:"item cancel-select-btn",onClick:p},"\u53D6\u6D88\u9009\u62E9")]),r("div",wo,[f(N,{placement:"top",content:"\u6279\u91CF\u590D\u5236\u5916\u94FE"},{default:g(()=>[r("i",{class:"el-icon-copy-document btn-icon",onClick:_})]),_:1}),f(N,{placement:"top",content:"\u6279\u91CF\u5220\u9664\u56FE\u7247"},{default:g(()=>[r("i",{class:"el-icon-delete btn-icon",onClick:m})]),_:1})]),Uo])):h("",!0)}}});var To=R(Bo,[["__scopeId","data-v-033900dc"]]);const Oo=e=>(Q("data-v-22214e14"),e=e(),Z(),e),xo={class:"page-container management-page-container"},Mo={class:"content-container"},Po={class:"top"},Ro={class:"left"},Vo={class:"right flex-start"},No=["onClick"],Go=["onClick"],zo={class:"bottom","element-loading-text":"\u52A0\u8F7D\u4E2D..."},Ho={key:0,class:"image-item"},jo=Oo(()=>r("div",{class:"clear"},null,-1)),Xo=x({setup(e){const n=H(),s=me(),t=C(()=>n.getters.getUserConfigInfo).value,o=C(()=>n.getters.getUserLoggingStatus).value,u=C(()=>n.getters.getDirObject).value,a=B(new Date().getTime()),i=B(!1),_=B(!1),p=B(),m=B([]),c=B([]);async function S(U){i.value=!0;const I=$e(U,u);if(I){const $=ke(U,I,"dir"),j=ke(U,I,"image");!$.length&&!j.length?await Be(U):(m.value=$,c.value=j,n.commit("REPLACE_IMAGE_CARD",{checkedImgArr:c.value}))}else await Be(U);i.value=!1}async function v(){const{selectedDir:U,dirMode:I}=t;if((I==="newDir"||I==="autoDir")&&!$e(U,u)&&(t.selectedDir="/",t.dirMode="rootDir"),!u.imageList.length&&!u.childrenDirs.length){await Be(t.selectedDir);return}await S(t.selectedDir)}function T(){_.value=!_.value}async function N(){const{selectedDir:U}=t;await n.dispatch("DIR_IMAGE_LIST_INIT_DIR",U),i.value=!0,await Be(U),i.value=!1}le(()=>{v()}),K(()=>o,U=>{U===!1&&s.push("/config")}),K(()=>t.selectedDir,async U=>{En(U,n),await S(U),a.value+=1},{deep:!0}),K(()=>u,U=>{const{selectedDir:I}=t,$=$e(I,U);$&&(m.value=ke(I,$,"dir"),c.value=ke(I,$,"image"),n.commit("REPLACE_IMAGE_CARD",{checkedImgArr:c.value}))},{deep:!0});const k=B(!1);return K(()=>c.value,U=>{k.value=U.filter(I=>I.checked).length>0},{deep:!0}),(U,I)=>{const $=F("el-tooltip"),j=Se("loading");return d(),E("div",xo,[r("div",Mo,[r("div",Po,[r("div",Ro,[f(mt)]),r("div",Vo,[f($,{placement:"top",content:_.value?"\u5207\u6362\u65B9\u5757\u5C55\u793A":"\u5207\u6362\u5217\u8868\u5C55\u793A"},{default:g(()=>[r("i",{class:W(["btn-icon",_.value?"el-icon-tickets":"el-icon-menu"]),onClick:fe(T,["stop"])},null,10,No)]),_:1},8,["content"]),f($,{placement:"top",content:"\u91CD\u65B0\u52A0\u8F7D\u56FE\u7247"},{default:g(()=>[r("i",{class:"btn-icon el-icon-refresh",onClick:fe(N,["stop"])},null,8,Go)]),_:1})])]),se((d(),E("div",zo,[c.value.length?(d(),b(To,{currentDirImageList:c.value,"onUpdate:initImageList":c.value,key:a.value},null,8,["currentDirImageList","onUpdate:initImageList"])):h("",!0),r("ul",{class:"image-list",style:Ke({height:k.value?"calc(100% - 50rem)":"100%"})},[l(t).selectedDir!=="/"?(d(),E("li",Ho,[f(ht,{mode:"back"})])):h("",!0),(d(!0),E(oe,null,ie(m.value,(G,X)=>(d(),E("li",{class:"image-item",key:X},[f(ht,{"folder-obj":G},null,8,["folder-obj"])]))),128)),jo,(d(!0),E(oe,null,ie(c.value,(G,X)=>(d(),E("li",{class:"image-item",key:X,style:Ke({width:_.value?"50%":"230rem",height:_.value?"80rem":"240rem"})},[f(pt,{"image-obj":G,listing:_.value,modelValue:p.value,"onUpdate:modelValue":I[0]||(I[0]=Y=>p.value=Y),index:X},null,8,["image-obj","listing","modelValue","index"])],4))),128))],4)])),[[j,i.value]])])])}}});var Yo=R(Xo,[["__scopeId","data-v-22214e14"]]);const Jo={class:"tutorials-step-1"},qo=y(" \u521B\u5EFA\u4E00\u4E2A\u7528\u6765\u5B58\u50A8\u56FE\u7247\u7684 "),Ko=r("img",{src:"https://cdn.jsdelivr.net/gh/XPoet/image-hosting@master/PicX/image.j1486dtk68n.png",alt:"Create GitHub Repository"},null,-1),Wo=x({setup(e){function n(){window.open("https://github.com/new")}return(s,t)=>(d(),E("div",Jo,[r("h3",null,[qo,r("span",{class:"go-create-repo",onClick:n}," GitHub \u4ED3\u5E93")]),Ko]))}});const Qo={class:"tutorials-step-2"},Zo=y(" \u521B\u5EFA\u4E00\u4E2A\u6709 repo \u6743\u9650\u7684 "),ea=r("img",{src:"https://cdn.jsdelivr.net/gh/XPoet/image-hosting@master/PicX/image.lpt1xl9fu.png",alt:"Create GitHub Token"},null,-1),ta=r("p",null,"\u7136\u540E\u70B9\u51FB Generate token \u6309\u94AE\uFF0C\u5373\u53EF\u751F\u6210\u4E00\u4E2Atoken\uFF0C\u5982\u4E0B\u56FE\uFF1A",-1),na=r("img",{src:"https://cdn.jsdelivr.net/gh/XPoet/image-hosting@master/PicX/image.pzmcp6b80fk.png",alt:"token-demo"},null,-1),sa=r("p",{style:{color:"red"}},[r("em",null,"\u65B0\u751F\u6210\u7684 Token \u53EA\u4F1A\u663E\u793A\u4E00\u6B21\uFF0C\u8BF7\u59A5\u5584\u4FDD\u5B58\uFF01\u5982\u6709\u9057\u5931\uFF0C\u91CD\u65B0\u751F\u6210\u5373\u53EF\u3002")],-1),oa=x({setup(e){function n(){window.open("https://github.com/settings/tokens/new")}return(s,t)=>(d(),E("div",Qo,[r("h3",null,[Zo,r("span",{class:"go-create-token",onClick:n}," GitHub Token")]),ea,ta,na,sa]))}});const aa={},ua={class:"tutorials-step-3"},ia=ln('<h3>\u8FDB\u884C\u56FE\u5E8A\u914D\u7F6E\uFF08\u7ED1\u5B9A GitHub Token\u3001\u5B58\u50A8\u56FE\u7247\u7684\u4ED3\u5E93\u548C\u76EE\u5F55\uFF09</h3><p>1\u3001\u586B\u5199 Token\uFF0C\u81EA\u52A8\u83B7\u53D6\u8BE5\u7528\u6237\u4E0B\u7684\u4ED3\u5E93</p><img src="https://cdn.jsdelivr.net/gh/XPoet/image-hosting@master/PicX/image.4g8q5m7c8sq0.png"><br><p>2\u3001\u5728\u4ED3\u5E93\u7684\u4E0B\u62C9\u5217\u8868\u4E2D\uFF0C\u9009\u62E9\u4E00\u4E2A\u4F5C\u4E3A\u56FE\u5E8A\u7684\u4ED3\u5E93</p><img src="https://cdn.jsdelivr.net/gh/XPoet/image-hosting@master/PicX/image.746g75olruk0.png"><br><p>3\u3001\u9009\u62E9\u4E00\u79CD\u76EE\u5F55\u65B9\u5F0F\uFF08\u76EE\u5F55\u5373\u4ED3\u5E93\u91CC\u5B58\u653E\u56FE\u7247\u7684\u6587\u4EF6\u5939\uFF09</p><img src="https://cdn.jsdelivr.net/gh/XPoet/image-hosting@master/PicX/image.5ydmhgxjhgo0.png"><div class="dir-desc-box"><ul><li>\u65B0\u5EFA\u76EE\u5F55\uFF1A\u9700\u624B\u52A8\u8F93\u5165\u4E00\u4E2A\u65B0\u76EE\u5F55\u3002</li><li>\u6839\u76EE\u5F55\uFF1A\u56FE\u7247\u5C06\u76F4\u63A5\u5B58\u50A8\u5728\u4ED3\u5E93\u6839\u76EE\u5F55\u4E0B\u3002</li><li>\u81EA\u52A8\u76EE\u5F55\uFF1A\u81EA\u52A8\u751F\u6210\u65E5\u671F\u683C\u5F0F YYYYMMDD \u7684\u76EE\u5F55\u3002\u4F8B\u5982\uFF1A20200909</li><li>\u9009\u62E9\u4ED3\u5E93\u76EE\u5F55\uFF1A\u81EA\u52A8\u83B7\u53D6\u4ED3\u5E93\u4E0B\u6240\u6709\u76EE\u5F55\uFF0C\u9009\u62E9\u4E00\u4E2A\u5373\u53EF\u3002</li></ul></div>',10),la=[ia];function ra(e,n){return d(),E("div",ua,la)}var ca=R(aa,[["render",ra]]);const da=x({name:"tutorials",components:{Step1:Wo,Step2:oa,Step3:ca},setup(){const e=B(0);return{stepNum:e,step:s=>{s==="prev"&&(e.value<0?e.value=0:e.value-=1),s==="next"&&(e.value>3?e.value=3:e.value+=1)}}}}),vt=e=>(Q("data-v-0275023f"),e=e(),Z(),e),_a={class:"page-container tutorials-page-container"},pa={class:"step-content"},ma={key:3},fa=vt(()=>r("h2",null,"\u{1F44D} \u606D\u559C\u4F60\u5B8C\u6210\u56FE\u5E8A\u4F7F\u7528\u6559\u7A0B \u{1F31F} \u5FEB\u53BB\u8BD5\u8BD5\u5427~",-1)),ga=vt(()=>r("h2",null,"https://github.com/XPoet/picx",-1)),ha=[fa,ga],Ea={class:"btn-next-prev"},va=y("\u4E0A\u4E00\u6B65 "),Fa=y("\u4E0B\u4E00\u6B65 ");function Da(e,n,s,t,o,u){const a=F("el-step"),i=F("el-steps"),_=F("Step1"),p=F("Step2"),m=F("Step3"),c=F("el-button");return d(),E("div",_a,[f(i,{active:e.stepNum,"finish-status":"success","align-center":""},{default:g(()=>[f(a,{title:"\u521B\u5EFA GitHub \u4ED3\u5E93"}),f(a,{title:"\u83B7\u53D6 GitHub Token"}),f(a,{title:"\u914D\u7F6E\u56FE\u5E8A"})]),_:1},8,["active"]),r("div",pa,[e.stepNum===0?(d(),b(_,{key:0})):h("",!0),e.stepNum===1?(d(),b(p,{key:1})):h("",!0),e.stepNum===2?(d(),b(m,{key:2})):h("",!0),e.stepNum===3?(d(),E("div",ma,ha)):h("",!0)]),r("div",Ea,[e.stepNum>0?(d(),b(c,{key:0,type:"primary",onClick:n[0]||(n[0]=S=>e.step("prev"))},{default:g(()=>[va]),_:1})):h("",!0),e.stepNum<3?(d(),b(c,{key:1,type:"primary",onClick:n[1]||(n[1]=S=>e.step("next"))},{default:g(()=>[Fa]),_:1})):h("",!0)])])}var Ia=R(da,[["render",Da],["__scopeId","data-v-0275023f"]]);const Fe=e=>(Q("data-v-45bba9e2"),e=e(),Z(),e),Sa={class:"page-container settings-page-container"},Aa=Fe(()=>r("div",{class:"setting-title"},"\u4E2A\u6027\u8BBE\u7F6E\uFF1A",-1)),Ca={class:"setting-list"},ba={class:"setting-item"},$a={class:"setting-item"},ka={class:"setting-item"},La=Fe(()=>r("div",{class:"setting-title"},"\u538B\u7F29\u8BBE\u7F6E\uFF1A",-1)),ya={class:"setting-list"},wa={class:"setting-item"},Ua={class:"setting-item"},Ba=Fe(()=>r("div",null,"\u9009\u62E9\u56FE\u50CF\u7F16\u7801\u5668\uFF1A",-1)),Ta=Fe(()=>r("div",{class:"setting-title"},"\u4E3B\u9898\u8BBE\u7F6E\uFF1A",-1)),Oa={class:"setting-list"},xa={class:"setting-item"},Ma={key:0,class:"setting-title"},Pa={key:1,class:"setting-list"},Ra={class:"setting-item"},Va=Fe(()=>r("span",{class:"time-middle-space"}," ~ ",-1)),Na=x({setup(e){const n=C(()=>P.getters.getUserSettings).value,s=()=>{P.dispatch("USER_SETTINGS_PERSIST")},t=ye,o=()=>{P.dispatch("SET_USER_SETTINGS",de({},n)),s()};return(u,a)=>{const i=F("el-switch"),_=F("el-input"),p=F("el-radio"),m=F("el-radio-group"),c=F("el-option"),S=F("el-select"),v=F("el-time-select"),T=F("el-form-item"),N=F("el-form");return d(),E("div",Sa,[Aa,r("ul",Ca,[r("li",ba,[f(i,{modelValue:l(n).defaultHash,"onUpdate:modelValue":a[0]||(a[0]=k=>l(n).defaultHash=k),onChange:s,"active-text":"\u4E0A\u4F20\u65F6\u9ED8\u8BA4\u7ED9\u56FE\u7247\u52A0\u4E0A\u54C8\u5E0C\u7801"},null,8,["modelValue"])]),r("li",$a,[f(i,{modelValue:l(n).defaultMarkdown,"onUpdate:modelValue":a[1]||(a[1]=k=>l(n).defaultMarkdown=k),onChange:s,"active-text":"\u4E0A\u4F20\u540E\u9ED8\u8BA4\u5F00\u542F Markdown \u683C\u5F0F\u7684\u5916\u94FE"},null,8,["modelValue"])]),r("li",ka,[f(i,{modelValue:l(n).defaultPrefix,"onUpdate:modelValue":a[2]||(a[2]=k=>l(n).defaultPrefix=k),onChange:s,"active-text":"\u4E0A\u4F20\u65F6\u9ED8\u8BA4\u4F7F\u7528\u914D\u7F6E\u7684\u547D\u540D\u524D\u7F00"},null,8,["modelValue"]),l(n).defaultPrefix?(d(),b(_,{key:0,class:"prefix-input",modelValue:l(n).prefixName,"onUpdate:modelValue":a[3]||(a[3]=k=>l(n).prefixName=k),size:l(n).elementPlusSize,placeholder:"\u8BF7\u8F93\u5165\u547D\u540D\u524D\u7F00",onInput:s,clearable:"",autofocus:""},null,8,["modelValue","size"])):h("",!0)])]),La,r("ul",ya,[r("li",wa,[f(i,{modelValue:l(n).isCompress,"onUpdate:modelValue":a[4]||(a[4]=k=>l(n).isCompress=k),onChange:s,"active-text":"\u662F\u5426\u538B\u7F29\u56FE\u7247"},null,8,["modelValue"])]),r("li",Ua,[Ba,f(m,{disabled:!l(n).isCompress,modelValue:l(n).compressEncoder,"onUpdate:modelValue":a[5]||(a[5]=k=>l(n).compressEncoder=k),onChange:s},{default:g(()=>[r("div",null,[f(p,{label:l(t).webP},{default:g(()=>[y(O(l(t).webP)+" \uFF08\u538B\u7F29\u540E\u683C\u5F0F\u4E3A webp\uFF0C\u73B0\u4EE3\u6D4F\u89C8\u5668\u652F\u6301\uFF09 ",1)]),_:1},8,["label"])]),r("div",null,[f(p,{label:l(t).mozJPEG},{default:g(()=>[y(O(l(t).mozJPEG)+" \uFF08\u538B\u7F29\u540E\u683C\u5F0F\u4E3A jpg\uFF0C\u517C\u5BB9\u6027\u597D\uFF09 ",1)]),_:1},8,["label"])]),r("div",null,[f(p,{label:l(t).avif},{default:g(()=>[y(O(l(t).avif)+" \uFF08\u538B\u7F29\u540E\u683C\u5F0F\u4E3A avif\uFF0C \u538B\u7F29\u6BD4\u9AD8\uFF0C\u76EE\u524D\u4EC5\u8C37\u6B4C\u6D4F\u89C8\u5668\u652F\u6301\u8BE5\u683C\u5F0F\uFF09 ",1)]),_:1},8,["label"])])]),_:1},8,["disabled","modelValue"])])]),Ta,r("ul",Oa,[r("li",xa,[f(S,{modelValue:l(n).themeMode,"onUpdate:modelValue":a[6]||(a[6]=k=>l(n).themeMode=k),placeholder:"\u4E3B\u9898\u6A21\u5F0F",onChange:o,size:l(n).elementPlusSize},{default:g(()=>[f(c,{label:"\u81EA\u52A8\u8BBE\u7F6E",value:"auto"}),f(c,{label:"\u6697\u591C\u4E3B\u9898",value:"dark"}),f(c,{label:"\u767D\u663C\u4E3B\u9898",value:"light"})]),_:1},8,["modelValue","size"])])]),l(n).themeMode==="auto"?(d(),E("div",Ma," \u8BBE\u7F6E\u767D\u663C\u6A21\u5F0F\u65F6\u95F4\u533A\u95F4\uFF1A ")):h("",!0),l(n).themeMode==="auto"?(d(),E("ul",Pa,[r("li",Ra,[f(N,{ref:"form",size:l(n).elementPlusSize},{default:g(()=>[f(T,null,{default:g(()=>[f(v,{modelValue:l(n).autoLightThemeTime[0],"onUpdate:modelValue":a[7]||(a[7]=k=>l(n).autoLightThemeTime[0]=k),placeholder:"",start:"00:00",step:"00:30",end:"23:59",onChange:o},null,8,["modelValue"]),Va,f(v,{modelValue:l(n).autoLightThemeTime[1],"onUpdate:modelValue":a[8]||(a[8]=k=>l(n).autoLightThemeTime[1]=k),placeholder:"Start time",start:l(n).autoLightThemeTime[0],step:"00:30",end:"23:59",onChange:o},null,8,["modelValue","start"])]),_:1})]),_:1},8,["size"])])])):h("",!0)])}}});var Ga=R(Na,[["__scopeId","data-v-45bba9e2"]]);const pe=" | PicX \u56FE\u5E8A\u795E\u5668",za=[{path:"/",name:"index",redirect:{name:"upload"}},{path:"/config",name:"config",component:zn,meta:{title:`\u56FE\u5E8A\u914D\u7F6E${pe}`}},{path:"/upload",name:"upload",component:vo,meta:{title:`\u56FE\u7247\u4E0A\u4F20${pe}`}},{path:"/management",name:"Management",component:Yo,meta:{title:`\u56FE\u5E8A\u7BA1\u7406${pe}`}},{path:"/tutorials",name:"tutorials",component:Ia,meta:{title:`\u4F7F\u7528\u6559\u7A0B${pe}`}},{path:"/about",name:"about",component:()=>Qe(()=>import("./about.43241f90.js"),["assets/about.43241f90.js","assets/about.35d1b809.css","assets/vendor.710ae729.js","assets/vendor.ae064b33.css"]),meta:{title:`\u5E2E\u52A9\u53CD\u9988${pe}`}},{path:"/settings",name:"settings",component:Ga,meta:{title:`\u6211\u7684\u8BBE\u7F6E${pe}`}}],Ft=rn({history:cn(),routes:za});Ft.beforeEach((e,n,s)=>{e.meta.title&&(window.document.title=e.meta.title),s()});const Ha=x({name:"site-count",props:{isuv:{type:Boolean,default:!1}},setup(){const e=B(null);return le(()=>{const n=document.createElement("script");n.async=!0,n.src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.value.appendChild(n)}),{siteCountDom:e}}}),ja={class:"site-count",ref:"siteCountDom"},Xa={key:0,id:"busuanzi_value_site_uv"},Ya={key:1,id:"busuanzi_value_site_pv"};function Ja(e,n,s,t,o,u){return d(),E("span",ja,[e.isuv?(d(),E("span",Xa)):h("",!0),e.isuv?h("",!0):(d(),E("span",Ya))],512)}var qa=R(Ha,[["render",Ja]]),Ka="./assets/logo.206d082d.png";const Wa=x({name:"header-content",components:{siteCount:qa},setup(){const e=me(),n=H(),s=Ae({defaultUsername:"\u672A\u767B\u5F55",userConfigInfo:C(()=>n.state.userConfigInfoModule.userConfigInfo)}),t=()=>{!s.userConfigInfo.loggingStatus&&e.currentRoute.value.path!=="/config"&&e.push("/config")},o=()=>{n.dispatch("LOGOUT"),e.push("/config")},u=i=>{switch(i){case"upload":e.push("/");break;case"config":e.push("/config");break;case"management":e.push("/management");break;case"logout":o();break}},a=()=>{window.open("https://github.com/XPoet/picx")};return xe(de({},Ce(s)),{router:e,onUserInfoClick:t,handleCommand:u,goGitHubRepo:a})}}),ze=e=>(Q("data-v-4d5395fa"),e=e(),Z(),e),Qa={class:"header"},Za={class:"header-left"},eu=ze(()=>r("div",{class:"logo"},[r("img",{src:Ka,alt:"PicX"})],-1)),tu=ze(()=>r("div",{class:"title"},"PicX",-1)),nu=[eu,tu],su={class:""},ou=y(" \u6709 "),au=y(" \u4F4D\u5C0F\u4F19\u4F34\u4F7F\u7528 PicX \u56FE\u5E8A\u795E\u5668 "),uu={class:"header-right"},iu={class:"username"},lu={key:0,class:"avatar"},ru=ze(()=>r("i",{class:"el-icon-user-solid"},null,-1)),cu=[ru],du={class:"el-dropdown-link"},_u={class:"avatar"},pu=["src","alt"],mu=y(" \u9000\u51FA\u767B\u5F55 ");function fu(e,n,s,t,o,u){var c,S;const a=F("site-count"),i=F("el-tooltip"),_=F("el-dropdown-item"),p=F("el-dropdown-menu"),m=F("el-dropdown");return d(),E("header",Qa,[r("div",Za,[r("div",{class:"brand",onClick:n[0]||(n[0]=v=>e.router.push("/"))},nu),r("div",{class:"website-count",onClick:n[1]||(n[1]=(...v)=>e.goGitHubRepo&&e.goGitHubRepo(...v))},[f(i,{content:"\u524D\u5F80 GitHub \u70B9 Star \u652F\u6301\u4E00\u4E0B\u4F5C\u8005(*\uFFE3\uFE36\uFFE3)",placement:"bottom"},{default:g(()=>[r("i",su,[ou,f(a,{isuv:!1}),au])]),_:1})])]),r("div",uu,[r("div",{class:"user-info",onClick:n[2]||(n[2]=(...v)=>e.onUserInfoClick&&e.onUserInfoClick(...v))},[r("div",iu,O(e.userConfigInfo.owner?e.userConfigInfo.owner:e.defaultUsername),1),((c=e.userConfigInfo)==null?void 0:c.avatarUrl)?h("",!0):(d(),E("div",lu,cu)),((S=e.userConfigInfo)==null?void 0:S.avatarUrl)?(d(),b(m,{key:1,trigger:"click",onCommand:e.handleCommand},{dropdown:g(()=>[f(p,null,{default:g(()=>[f(_,{command:"logout"},{default:g(()=>[mu]),_:1})]),_:1})]),default:g(()=>{var v,T;return[r("span",du,[r("span",_u,[r("img",{src:(v=e.userConfigInfo)==null?void 0:v.avatarUrl,alt:(T=e.userConfigInfo)==null?void 0:T.owner},null,8,pu)])])]}),_:1},8,["onCommand"])):h("",!0)])])])}var gu=R(Wa,[["render",fu],["__scopeId","data-v-4d5395fa"]]);const hu=x({name:"nav-content",setup(){const e=me(),n=H(),s=Ae({userConfigInfo:C(()=>n.getters.getUserConfigInfo).value,navList:[{name:"\u56FE\u5E8A\u914D\u7F6E",icon:"el-icon-edit-outline",isActive:!1,path:"/config",isShow:!0},{name:"\u4E0A\u4F20\u56FE\u7247",icon:"el-icon-upload2",isActive:!1,path:"/upload",isShow:!0},{name:"\u56FE\u5E8A\u7BA1\u7406",icon:"el-icon-box",isActive:!1,path:"/management",isShow:!0},{name:"\u6211\u7684\u8BBE\u7F6E",icon:"el-icon-setting",isActive:!1,path:"/settings",isShow:!0},{name:"\u4F7F\u7528\u6559\u7A0B",icon:"el-icon-magic-stick",isActive:!1,path:"/tutorials",isShow:!0},{name:"\u5E2E\u52A9\u53CD\u9988",icon:"el-icon-chat-dot-round",isActive:!1,path:"/about",isShow:!0}],navClick(o){const{path:u}=o;if(u==="/management"){if(this.userConfigInfo.selectedRepos===""){V.warning("\u8BF7\u9009\u62E9\u4E00\u4E2A\u4ED3\u5E93\uFF01"),e.push("/config");return}if(this.userConfigInfo.selectedDir===""){V.warning("\u76EE\u5F55\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),e.push("/config");return}}e.push(u)}}),t=o=>{s.navList.forEach(u=>{const a=u;return a.isActive=u.path===o,a})};return K(()=>e.currentRoute.value,o=>{t(o.path)}),K(()=>s.userConfigInfo.loggingStatus,o=>{s.navList.forEach(u=>{switch(u.path){case"/management":case"/settings":u.isShow=o}})},{deep:!0,immediate:!0}),le(()=>{e.isReady().then(()=>{t(e.currentRoute.value.path)})}),de({},Ce(s))}}),Eu={class:"nav"},vu={class:"nav-list"},Fu=["onClick"],Du={class:"nav-content"},Iu={class:"nav-name"};function Su(e,n,s,t,o,u){return d(),E("aside",Eu,[r("ul",vu,[(d(!0),E(oe,null,ie(e.navList,(a,i)=>se((d(),E("li",{class:W(["nav-item flex-center",{active:a.isActive}]),key:i,onClick:_=>e.navClick(a)},[r("div",Du,[r("i",{class:W(["nav-icon",a.icon])},null,2),r("span",Iu,O(a.name),1)])],10,Fu)),[[Je,a.isShow]])),128))])])}var Au=R(hu,[["render",Su],["__scopeId","data-v-398e55df"]]);const Cu={key:0,class:"image-box"},bu=["src"],$u={key:0,class:"image-info"},ku=x({setup(e){const n=H(),s=C(()=>n.getters.getImageViewer);function t(u){return`${we(u)} KB`}function o(u){return Le.formatTimestamp(u)}return(u,a)=>{var _,p,m,c;const i=F("el-tag");return d(),E("div",{class:W(["image-viewer",{active:l(s).isShow}]),onClick:a[0]||(a[0]=S=>l(s).isShow=!1)},[((p=(_=l(s))==null?void 0:_.imgInfo)==null?void 0:p.url)?(d(),E("div",Cu,[r("img",{class:"img",src:(c=(m=l(s))==null?void 0:m.imgInfo)==null?void 0:c.url},null,8,bu),l(s).imgInfo?(d(),E("div",$u,[l(s).imgInfo.name?(d(),b(i,{key:0,class:"item",size:"small"},{default:g(()=>[y(" \u56FE\u7247\u540D\uFF1A"+O(l(s).imgInfo.name),1)]),_:1})):h("",!0),l(s).imgInfo.size?(d(),b(i,{key:1,class:"item",size:"small"},{default:g(()=>[y(" \u56FE\u7247\u5927\u5C0F\uFF1A"+O(t(l(s).imgInfo.size)),1)]),_:1})):h("",!0),l(s).imgInfo.lastModified?(d(),b(i,{key:2,class:"item",size:"small"},{default:g(()=>[y(" \u6700\u540E\u4FEE\u6539\u65F6\u95F4\uFF1A"+O(o(l(s).imgInfo.lastModified)),1)]),_:1})):h("",!0)])):h("",!0)])):h("",!0)],2)}}});var Lu=R(ku,[["__scopeId","data-v-c1944e44"]]);const yu=()=>{const e=H(),n=async o=>{await qe(()=>{const u=document.getElementsByTagName("body")[0];o==="dark"?(u.classList.remove("light-mode"),u.classList.add("dark-mode")):(u.classList.remove("dark-mode"),u.classList.add("light-mode"))})},s=o=>{const u=i=>{const _=new Date,p=_.getFullYear(),m=_.getMonth()+1,c=_.getDate();return new Date(`${p}/${m}/${c} ${o[i]}:00`).getTime()},a=Date.now();return u(0)<=a&&a<=u(1)},t=o=>{const{themeMode:u,autoLightThemeTime:a}=o;n(u==="auto"?s(a)?"light":"dark":u)};K(()=>e.getters.getUserSettings,o=>{t(o)},{deep:!0,immediate:!0})};const wu=x({name:"main-container",components:{headerContent:gu,navContent:Au,imageViewer:Lu},setup(){const e=H(),n=t=>{e.commit("CHANGE_UPLOAD_AREA_ACTIVE",t.target.classList.contains("active-upload"))},s=t=>{t<=500?e.dispatch("SET_USER_SETTINGS",{elementPlusSize:"mini"}):t<=800?e.dispatch("SET_USER_SETTINGS",{elementPlusSize:"small"}):e.dispatch("SET_USER_SETTINGS",{elementPlusSize:"medium"})};return le(()=>{yu(),s(window.innerWidth),window.addEventListener("resize",t=>{s(t.target.innerWidth)})}),{changeUploadAreaActive:n}}}),Uu={class:"top"},Bu={class:"bottom"},Tu={class:"container"},Ou={class:"left"},xu={class:"right"},Mu={class:"content"};function Pu(e,n,s,t,o,u){const a=F("header-content"),i=F("nav-content"),_=F("router-view"),p=F("image-viewer");return d(),E(oe,null,[r("main",{class:"main-container",onClick:n[0]||(n[0]=(...m)=>e.changeUploadAreaActive&&e.changeUploadAreaActive(...m))},[r("div",Uu,[f(a)]),r("div",Bu,[r("div",Tu,[r("div",Ou,[f(i)]),r("div",xu,[r("div",Mu,[f(_)])])])])]),f(p)],64)}var Ru=R(wu,[["render",Pu],["__scopeId","data-v-e8cdd0b8"]]);const Vu=x({name:"App",components:{mainContainer:Ru}});function Nu(e,n,s,t,o,u){const a=F("main-container");return d(),b(a)}var Gu=R(Vu,[["render",Nu]]);Qe(()=>import("./register-sw.54a2035f.js"),[]);const Dt=dn(Gu);fn(Dt);Dt.use(Ft).use(P,ot).mount("#app");export{R as _};
